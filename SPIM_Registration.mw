{{Infobox
| name                   = Selective Plane Illumination Microscopy Registration
| software               = ImageJ
| author                 = Stephan Preibisch, Stephan Saalfeld, Johannes Schindelin, Pavel Tomancak
| maintainer             = Stephan Preibisch
| filename               = SPIM_Registration.jar
| released               = February 2010
| latest version         = June 2012
| category               = [[:Category:Registration|SPIM Registration]]
| website                = [http://fly.mpi-cbg.de/~preibisch Stephan Preibisch's homepage]
}}

== Citation ==
Please note that the SPIM registration plugin available through Fiji, is based on a publication. If you use it successfully for your research please be so kind to cite our work:
* S. Preibisch, S. Saalfeld, J. Schindelin and P. Tomancak (2010) "Software for bead-based registration of selective plane illumination microscopy data", ''Nature Methods'', '''7'''(6):418-419. [http://www.nature.com/nmeth/journal/v7/n6/full/nmeth0610-418.html Webpage] [[Media:Nmeth0610-418.pdf|PDF]] [[Media:Nmeth0610-418-S1.pdf|Supplement]]
* S. Preibisch, F. Amat, E. Stamataki, M. Sarov, R.H. Singer, E. Myers and P. Tomancak (2014) "Efficient Bayesian-based Multiview Deconvolution", ''Nature Methods'', '''11'''(6):645-648. [http://www.nature.com/nmeth/journal/v11/n6/full/nmeth.2929.html Webpage]
For technical details about the registration method and SPIM imaging see also [[SPIM Registration Method]].


== Introduction & Overview ==

<span style="color:#A52A2A">
'''''Please Note: This version of the software is outdated. It will be part of Fiji for the time being, but I highly recommend using the new [[Multiview-Reconstruction|Multiview Reconstruction Plugin]]. It is much more powerful, flexible and completely integrated with the [[BigDataViewer]].'''''
</span>


Selective Plane Illumination Microscopy (SPIM, [http://www.sciencemag.org/content/305/5686/1007 ''Science'', '''305'''(5686):1007-9]) allows ''in toto'' imaging of large specimens by acquiring image stacks from multiple angles. However, to realize the full potential of these acquisitions the data needs to be reconstructed:

<include iframe title="YouTube video player" width="350" height="267" src="http://www.youtube.com/embed/jkDd8SMv1eU" frameborder="0" allowfullscreen></include>

We developed several algorithms for the registration and fusion of multi-angle SPIM acquisitions. This plugin collection allows you to reconstruct an isotropic output image from several input images, called '''views'''. This process can be applied to timelapse acquisitions as well. The complete reconstruction process is split into two parts, where you have several choices for each step:

* '''Multi-view registration:''' Aligns all views of the dataset <br><br>
** [[SPIM_Bead_Registration|Bead-based registration]]: Uses flourescent beads to achieve the alignment. This method is very fast and solves timeseries registration, but relies on the incorporation of fluorescent beads. The plugin can be found in Plugins->SPIM Registration->Bead-based registration.
** [[Segmentation-based registration]]: Uses structures within the sample like nuclei to achieve registration. It is slower and timelapse registration might be a sample dependent problem, but does not require any special sample prepration.

* '''Multi-view fusion:''' Computes the output image(s) based on the registration results<br><br>
** [[Multi-View_Fusion|Multi-view fusion]]: Performs a weighted average fusion of the dataset, which includes blending and/or content-based weightening. The plugin can be found in Plugins->SPIM Registration->Multi-view fusion.
** [[Multi-View_Deconvolution|Multi-view deconvolution]]: Performs a multi-view deconvolution of the dataset which requires an estimation of the point spread function. 


'''''Please note:''''' ''the SPIM registration has been rewritten and now replaces the "old" plugin collection (Registration, Advanced Registration, MultiChannel Registration) which has been moved to the deprecated folder. For information regarding these outdated plugins please refer to this [[SPIM_Bead_Registration_(deprecated)|page]].''

== Detailed tutorials ==

SPIM registration is particularly useful for processing of data acquired on [http://openspim.org '''OpenSPIM''']. Detailed step-by-step tutorials are available on the [http://openspim.org/Operation#Data_processing '''OpenSPIM wiki'''].

* We start by defining [http://openspim.org/Pre-requisites '''System requirements'''] and downloading [http://openspim.org/Raw_data '''sample OpenSPIM data],
* followed by optional [http://openspim.org/Pre-processing '''pre-processing steps'''].
* [http://openspim.org/Registration '''Multi-view registration'''] is at the heart of SPIMage processing pipeline.
* [http://openspim.org/Fusion '''Multi-view Fusion'''] section discusses how to combine several view into one output image
* [http://openspim.org/Timelapse_Registration '''Time series registration'''] removes the sample drift across long-term timelapse.

The pipeline is relatively linear as described above, we highlight the steps where [http://openspim.org/Registration#Cross-road_in_SPIM_plugins '''alternative routes exist'''].


== How do I view fused, saved output image(s) ==

The fused images will be saved in the ''output'' directory of the dataset as a collection of two-dimensional planes. The created output images can be viewed for example with Plugins->Image5D->[http://imagej.net/plugins/image5d.html Virtual Image 5D Opener] or via the Plugins->LOCI->[http://www.loci.wisc.edu/software/bio-formats Bio-Formats Importer] (check the option ''Group files with similar names'').

== Downloading example dataset ==

There is a 7-angle SPIM dataset of ''Drosophila'' available [http://fly.mpi-cbg.de/preibisch/nm/HisYFP-SPIM.zip here]. The cropping parameters pre-set in the plugin fit this dataset, only the appropriate folder has to be defined.

== System requirements ==

Multi-view SPIM datasets are typically rather large, therefore it is recommended to use the registration plugin on a computer with a lot of RAM. The minimal requirement for the example dataset is '''at least 4Gb''' of memory however we recommend an '''16Gb+''' system. You may need to increase the Fiji memory limit by going to Edit->Options->Memory & Threads.

== Cluster processing ==

See dedicated [[SPIM_Registration_on_cluster|page]] describing how to process SPIM data from Lighsheet.Z1 on the MPI-CBG cluster.
