<div style="background:#ffd; padding: 10px 10px 0 10px; border: 1px solid black;">
To '''download from someone else's update site''', see: [[How to follow a 3rd party update site]].

To '''browse a list of existing update sites''', see: [[List of update sites]].
</div>


This tutorial explains how to set up a website to distribute your plugins. It assumes that:
* Your plugins are correctly installed in Fiji
* You have either:
<ol style="list-style-type:lower-alpha">
  <li>A [[#Dropbox|Dropbox account]]; or</li>
  <li>SSH/FTP access to a website that serves static web pages.</li>
</ol>
* In case you want to use your own server, it must have an empty, public web accessible folder where you intend to publish your updates. The Fiji updater will not create that empty folder.

== Start the [[Fiji Updater|updater]] and check your plugins ==

First, start the [[Fiji Updater|updater]]:

[[Image:How_to_setup_a_plugin_distribution_site-1.jpg]]

Click on the 'Advanced mode' button and set the view options to 'View non-Fiji plugins only' to see your plugins. In this case, the plugin we'll be uploading is contained in ''A_Jolly_Useful_Plugin.jar''.

[[Image:How_to_setup_a_plugin_distribution_site-2.jpg|770px]]

== Set up the update site ==

Click the 'Manage update sites' button to bring up a dialog to allow entering your site information. Click the 'For Uploading' checkbox to specify that you'll be uploading your plugins to the site.

[[Image:How_to_setup_a_plugin_distribution_site-4.jpg|770px]]

Click the 'Add' button and fill in your choice of name for the site, the public URL, the SSH hostname, and the directory into which the site should be installed via SSH.

* Note that the URL and the upload directory need to point to the same location on the server. In this case, the webserver maps ''genomics.lbl.gov/~gavin/FijiPlugins'' to ''~gavin/public_html/FijiPlugins'' on the ''tatooine'' server.

[[Image:How_to_setup_a_plugin_distribution_site-6.jpg|770px]]

Click 'OK' to add the update site.

* Note: you need to prefix the SSH host with ''<username>@'', e.g. ''gavinrocks@tattooine.pdq-bach.org''.

* Note: if you can upload files to your site via SFTP, but not SSH, you need to prefix the SSH host with ''sftp:'', e.g. ''sftp:gavinrocks@tattooine.pdq-bach.org''.

* Note: if you want to use your Dropbox account, please look [[#Dropbox|here]] for details.

If the update site has not been initialized yet (i.e. if nobody else has initialized that site yet), you will see a dialog like this:

[[Image:How_to_setup_a_plugin_distribution_site-6a.jpg|center]]

Click 'Yes'. You will then need to enter your login credentials for the site. This will upload an initial plugin database containing no records at all. Without this step, you will not be able to upload plugins.

Once the site is set up, the 'Manage update sites' dialog should look something like this:

[[IMage:How_to_setup_a_plugin_distribution_site-9.jpg|770px]]

If you made a mistake, you can edit the site information by pressing - you guessed it - the Edit button.

== Upload your plugins ==

Close the dialog, and in the Status/Action column, set the your plugin's status to 'Upload it'. Select the name of your upload site in the resulting popup dialog.

[[Image:How_to_setup_a_plugin_distribution_site-13.jpg|770px]]

Note that this plugin's dependencies, ''ij.jar'' and ''someJarOrOther.jar'', are automatically determined by the updater. Hence if you require 3rd party packages for your plugin you can place them into the jars folder of Fiji and the updater will automatically upload them to the site.

Enter any information you wish to provide about the plugin:

[[Image:How_to_setup_a_plugin_distribution_site-15.jpg|770px]]

Finally, click 'Upload to server' to copy your plugin to the server and allow others to access your plugin. If you have dependencies that are not part of Fiji (such as ''someJarOrOther.jar''), Fiji will ask you if you want to upload the jar as well. Finally, you will be asked for your login credentials again and the files will be uploaded to the server. 

Check that your plugins are now registered as Fiji plugins by selecting 'View files of the '[your site name here]' site':

[[Image:UpdaterFinalScreen.jpg|770px]]

That's it - you're done. Now, anyone who wants a copy of your plugins merely needs to [[How to follow a 3rd party update site|add your update site]] to the Update manger via the URL you specified, and your plugins will be downloaded and updated in their Fiji installations just like the standard Fiji plugins.

== Publishing your update site ==

If you want to let other people know about your update site, just add it to the  [[list of update sites]].

== Dropbox ==

You can use the ''Public/'' folder of a [http://dropbox.com Dropbox] account to publish your plugins.

All you need to do is enter the appropriate information:

; Name:
: a nickname for your update site, e.g. ''Johannes Dropbox''.
; URL:
: the public URL of the ''Public/'' folder of your Dropbox account. Simple right-click on the ''How to use the Public folder.rtf'' file after loggin into your Dropbox account, select ''Copy public link'' and remove the file name from the URL. Example: https://www.dropbox.com/sh/la8g3k4uzhg53kz/UZUKTY-CX4/
; SSH host:
: we will pretend that the server is local, so put in ''file:localhost''.
; Upload directory:
: this must be the absolute path to your local Dropbox' Public/ folder. Example: ''/home/mike/Dropbox/''

<span style='text-color: red;'>Note!</span> The updater will ask you whether you want to initialize the update site. This might trigger an error message like this: ''Could not initialize update site 'Johannes Dropbox'''. No need to worry! This error happens because the updater assumes that the file it wrote will be available via the URL immediately! However, just clicking ''OK'' in the error message followed by clicking ''OK'' in the ''Add update site'' dialog will work around the slight delay caused by the synchronization of the Dropbox.

==See Also==
[[How to follow a 3rd party update site]]

[[Category:Tutorials]]
