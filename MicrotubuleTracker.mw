[[Image:newlogo.png|right|320px]]
{{ComponentStats:net.imagej:MTrack}}
== Description ==
MTrack is a tool, which detects, tracks, and measures the behavior of fluorescently labeled microtubules imaged by TIRF (total internal reflection fluorescence) microscopy. In such an in vitro reconstitution approach, stabilized, non-dynamic microtubule seeds serve as nucleation points for dynamically growing microtubules.

MTrack is a tri-modular tool. The first module detects and tracks the growing microtubule ends and creates trajectories. The second module uses these trajectories to fit models of dynamic behavior
(polymerization and depolymerization velocities, catastrophe and rescue frequencies). The third module computes statistics such as length and lifetime distributions when analyzing more than one
movie (batch mode).

== Module 1 - Microtubule Detection & Tracking==
A typical data set consists of a single two-dimensional (2d) image of the non-dynamic microtubule seeds followed by a 2d time-lapse of the dynamically growing microtubules (Note1). The file format
can be any format readable by Fiji/Bioformats (.tif, .nd2, … ). To run the tracker select {{bc|Plugins|MTrack|Tracking}}
The welcome panel will open.

===Choose Mode===
For a first analysis of your data, we suggest using the simple mode, in which we have pre-selected a number of parameters. In case you are unsatisfied with the outcome of the tracking you can use the
advanced mode to fine-tune settings. When analyzing more than one movie, you can select batch mode and run many movies simultaneously. However, before running the program in batch mode, you
have to at least run the program once in single or advanced mode to select and save the required parameters. The following intro is on simple mode, see here for advanced or batch mode.

===Select Movie===

Next, the user selects the movie.
Please note that detection might work better on flat-field corrected images. Optionally, we offer to approximate a flat-field correction based on the image data itself (Read more about Preprocessing).
For the movie type chooses one of the three supported options:
* Two channel image as hyper stack (both channels in one image)
* Concatenated seed image followed by time-lapse images
* Single channel time-lapse images
Please choose an output file name and directory. The trajectory files will be written as .txt files. By default trajectories will be saved in the current working directory with the name of the image.

===Microscope Parameters===
The program automatically reads the meta data shown as pixel size (micrometer in x and y) and frame rate (in seconds). If the metadata could not be read properly, the user can change the values. In addition, the user is asked to enter the Sigma(X) and Sigma(Y) of the Point-Spread-Function (PSF) of the microscope in pixel units (Note 2). For your convenience, our software comes with an inbuilt PSF analyzer tool, which
can optionally determine the PSF of your microscope from bead images by fitting a Gaussian function.

===Preprocessing===
Since initial microtubule detection might be disturbed by noise we suggest a preprocessing using median filtering (e.g. r=2 pixels) for the initial detection step by MSER/Watershed based Hough Transform.
Please note that this blurring will not be used during subsequent tracking. Press Next to proceed, and 3 screens and one panel will open. They show the original movie, the preprocessed movie, and the “active image”, which representing the seeds and is typically the first frame of the movie. Every successfully recognized seed will be marked with a red ellipse.

===MSER parameters===
The default algorithm to identify the seeds as objects is called Maximally Stable Extremal Regions (MSER) (Ref 1) Read more about MSER parameters. If seeds are not recognized or two very close seeds are recognized as one, the user can change the MSER parameters using the adjustable sliders. The effect will be displayed live on the “active image”. Once most seeds are correctly recognized as objects, click “Find endpoints” to detect the ends of each seed with sub-pixel accuracy. The end-points will be displayed as green circles. “Next” flips to the next panel.

===Options===
Before starting the actual tracking of the dynamically growing microtubules, the program will give you several options. Before choosing endpoints to remove or add you check all frames of the movie by moving the slider in the “Deleselect and select ends” dialog. Select or deselect ends. If an end was wrongly recognized or two points are too close to each other you can deselect an end by left clicking on it in the image. The program will remember and allow to re-select this end by clicking Shift + left click (pink circle will mark the end). In case an end has not been recognized, use Shift + Alt + left click to select a user defined end (orange circle will mark the end). Read more on microtubule polarity and (+) end vs. (-) end tracking.
Select the start and end time over which the tracking will be performed by entering the frame numbers.
Yellow ellipses mark seeds to be tracked, red ellipses mark seeds, which won”t be tracked. Green circles mark ends to be tracked. Orange circles mark user defined ends and will be tracked.
Click “Confirm ends and track” to perform the actual tracking, which will be performed “live” (progress bar will show). A yellow crosshair will show the current position of the tracking on each marked microtubule end. A "Success" frame will let you know about the end of the tracking. Two movies will be displayed, the “Track ID” movie, which can be used to link the trajectories to individual
