[[Image:inilogo.png|right|320px]]
{{ComponentStats:net.imagej:MTV_Tracker}}
== Description ==
The Microtubule Tracker is a tool to track and analyze the Microtubules that grow and shrink as filaments. It was developed for experiments done in-vitro with a TIRF microscope with seeded Microtubules which grow and shrink over time. 

The visualized data comprises of a 2D seed image from which the Microtubules grow followed by a time-lapse sequence of dynamically growing seed ends. The file format required for the tracker is TIF.

The images can be taken in single or double channel. In the single channel imaging the seed is always present and the dynamic ends are tracked over time. In the double channel imaging the seed is present only in the first image and is missing in the succeeding images.

For running the tracker in the single channel select, {{bc | Plugins | MTV Tracker | Microtubule Velocity Tracker (Single Channel)}}, for double channel images select the Double Channel option instead. In the description that follows we assume that the user is working with double channel images, without the loss of generality as the same is true for the single channel image analysis as well.

The Microtubule tracker comes as a tri-modular tool. The first module is live tracking of the growing seed ends, the second module requires the track files generated by the first module to obtain the growth, shrinkage rates and catastrophe and rescue frequencies. A subset of the second module compute statistics such as the length and lifetime distribution when analyzing track files in batch mode.

== File Chooser ==
The opening screen of the program is the file chooser where the user chooses the mode in which to run the program in and upload the image files to perform the tracking with. There are three modes in which the program can be run 1) Simple Mode, 2) Advanced Mode, 3) Batch Mode. The Simple mode gives user with some default settings with few choices to make to obtain the tracks. The Advanced mode gives user the full freedom with respect to their choices to obtain the tracks. 

[[Image:FileChooser.png|400px]]

If the user wants to run the program in Simple or Advanced Mode they have to also upload the image file and optionally a pre-processed image file. If the pre-processed image file is not uploaded this step will be carried out by the tracker internally. Pre-processed image is very crucial as the first part of the tracker is object recognition where it locates the Microtubules in the image. The recommended preprocessing for the tracker is flat-field correction followed by Median filter. The user also has to enter the SigmaX and SigmaY of the Point-Spread-Function (PSF) of the microscope used to image the Microtubules. 

The Batch mode is run with save parameters on a directory of Microtubule time-lapse images. The user should run the program in either Simple or Advanced mode to determine a suitable set of parameters that works well for their images, which can then be saved in IJ.prefs file, in batch mode those saved parameters are used to run the program on directory of images in parallel.

=== Pre-Processing ===
If the user intends to upload their own preprocessed image it is recommended to do a flat field correction. To do this correction in Fiji, open your image and duplicate it by selecting {{bc | Image | Duplicate}} from the Fiji menu and click Duplicate Stack. On the duplicated image apply a Gaussian blur of radius about a tenth of the size of the image, to do so click {{bc | Process | Filters | Gaussian Blur}} and enter the radius of the blur, for example if the image is 512 by 512 pixels the blur radius would be 50. 

After this we the resulting blurred image has to be subtracted from the original image, to do so click  {{bc | Process | Image Calculator}} Image1 is the original image and image2 is the resulting image after applying the Gaussian Blur. The operation is Subtract and check the box "Create new window". This operation opens a new stack of flat field corrected image. In order to enhance the edges of the Microtubules we also apply a Median filter, to do so click {{bc | Process | Filters | Median FIlter}} and enter the radius of 1 or 2 pixels. Now you have created the pre-processed image to be uploaded into the tracker. Alternatively the tracker performs these operations internally if you do not upload such an image.

=== Simple Mode ===

The operation of tracking the dynamic Microtubule ends is broken into a series of short steps the user has to take. The first step is to select an output filename for their tracks and choose the directory to store these tracks in. The track files are written in TXT format in the current working directory and by default it has the name of the image that is currently being analyzed.

Tracking requires an object recognition method to locate the object of interest in the image, in our case the object of interest are the Microtubules and the default algorithms to locate them on the image is Maximally Stable Extremal Regions (MSER). MSER is computed on a unsignedByteType image (Intensity levels between 0-255 ) and the following table explains the MSER parameters to be chosen in this mode.

{| border="1" style="border-collapse:collapse;"
| style="padding: 5px;" | Grey Level Separation
| style="padding: 5px;" | Difference between succeeding thresholds applied to make the component tree.
|-
| style="padding: 5px;" | Unstability Score
| style="padding: 5px;" | A normalized measure of the lifetime of each component.
|-
| style="padding: 5px;" | Min #of pixels
| style="padding: 5px;" | Minimum number of pixels contained in a stable region.
|}

MSER applies successive thresholds and builds a component tree as shown in the Figure (linear time citation here). If the grey level separation is small (0 - 20) more stable regions will be found, if it is high then only few regions will be found. The lifetime of each component is measured by the unstability score and is normalized between 0 and 1. For values close to 1 many regions will be deemed stable and found by the algorithm and for values close to 0 only very few extremely stable regions will be found.

[[Image:GreyLevel.png|400px]]  
The nodes of the tree are vertical boxes and vertical extent of the box shows the grey-level life span of each component.
