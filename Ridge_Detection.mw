{{Infobox
| software               = Fiji
| name                   = Ridge (Line) Detection Plugin
| author                 = Thorsten Wagner, Mark Hiner
| maintainer             = Thorsten Wagner (wagner@biomedical-imaging.de)
| filename               = Ridge_Detect.jar [https://github.com/thorstenwagner/ij-ridgedetection/releases/latest [1]]
| source                 = Github [https://github.com/jumpfunky/ij-ridgedetection [2]]
| latest version         = v1.1.2 (11 Nov 2015)
| status                 = active 

}}


== Purpose ==
This plugin implements the ridge / line detection algorithm described in:

''Steger, C., 1998. An unbiased detector of curvilinear structures. IEEE Transactions on Pattern Analysis and Machine Intelligence, 20(2), pp.113â€“125.''

It works with stacks, is parallelized and has a preview mode.
It depends on the [http://commons.apache.org/proper/commons-lang/ apache-commons-lang 3] library. For ImageJ, please copy it into plugins/jars.

== Examples ==
[[File:CNT_Ridge_Detection_Original.png]]      [[File:CNT_Ridge_Detection_Example.png]]

This example shows the application of the plugin on images of carbon nanotubes (Sigma = 1.5, Lower Threshold = 1.3, Higher Threshold = 7).

= Parameter Selection =

There are three parameters which '''have to ''' be specified. These are the mandatory parameters. The optional parameters can be used to estimate the mandatory parameters [[File:Ridge Detection Parameters.png|150px|thumb]]

==Mandatory Parameters==

'''Sigma:''' Determines the sigma for the derivatives. It depends on the line width.

'''Lower Threshold:''' Line points with a response smaller as this threshold are rejected

'''Upper Threshold:''' Line points with a response larger as this threshold are accepted.

'''Darkline:''' (true/false) This parameter determines whether dark or bright lines are extracted.

==Optional parameters==

The following optional parameters are used to estimate the mandatory parameters:

'''Line width''' (<math>w</math>): The line diameter in pixels. It estimates the mandatory parameter 'Sigma' by:

<math>\sigma=\frac{w}{2\sqrt{3}}+0.5</math>

'''High contrast''' (<math>b_{upper}</math>): Highest grayscale value of the line. It estimates the mandatory parameter 'Upper threshold' by:

<math>T_{U}=\left\lfloor 0.17\cdot\frac{2\cdot b_{upper}\cdot\frac{w}{2}}{\sqrt{2\pi}\sigma^{3}}e^{-\frac{\left(\frac{w}{2}\right)^{2}}{2\sigma^{2}}}\right\rfloor </math>


'''Low contrast''' (<math>b_{low}</math>):  Lowest grayscale value of the line. It estimates the mandatory parameter 'Lower Threshold' by:

<math>T_{L}=\left\lfloor 0.17\cdot\frac{2\cdot b_{low}\cdot\frac{w}{2}}{\sqrt{2\pi}\sigma^{3}}e^{-\frac{\left(\frac{w}{2}\right)^{2}}{2\sigma^{2}}}\right\rfloor </math>

==Further options (true/false)==
[[File:RidgeDetectionWidth.png|140px|thumb|Output if "Estimated width" is selected]]
'''Correct position:''' Correct the line position if it has different contrast on each side of it.

'''Estimate width:''' If this option is selected the width of the line is estimated.

'''Show junction points:''' If this option is selected the junctions points will be displayed.

'''Show IDs:''' The ID of each line will be shown.

'''Display results:''' If this option is selected, all contours and junctions are filled into a results table.

'''Add to Manager:''' All lines and junctions points will be added to the roi manager.

=Installation=

Simply turn on the [[How_to_follow_a_3rd_party_update_site|Biomedgroup update site]], which includes the ridge detection plugin.

If you use ImageJ just copy the RidgeDetection.jar file in your plugins folder and copy the  [http://commons.apache.org/proper/commons-lang/ apache-commons-lang 3] jar file into the plugins/jars folder.
