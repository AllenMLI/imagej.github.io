__TOC__

{{Infobox
| software               = ImageJ/Fiji
| name                   = Interactive H-Watershed
| author                 = [[User:Benoit|Benoit Lombardot]]
| maintainer             = [[User:Benoit|Benoit Lombardot]]
| released               = 05 May 2017
| filename               = soon on SCF-MPI-CBG update site
| source                 = https://github.com/mpicbg-scicomp/Interactive-H-Watershed
| category               = [[:Category:Plugins|Plugins]], [[:Category:Segmentation|Segmentation]]
}}

[[Category:Plugins]]
[[Category:Segmentation]]

logo Image

=Introduction=

==Motivations==
Watershed [ref Soille] is a common tool to segment objects in an 2D and 3D images. It is relatively fast and can provides understandable and robust results which can be used for image analysis.


Creating a good segmentation however requires some expertise and can be time consuming. One has to determine the right threshold to stop the watershed. Meaningful local extrema have to be selected to initiate the algorithm. And once a result is obtained the segmentaiton has to be compared to the original data. That process can then be iterated till satisfying parameters are found. That procedure can be very time consuming if not provided with practicle tools, especially when imaage are large and a single watershed can take minutes.

The interactive Watershed plugin provides an interactive way to

==Watershed principle==

If we interpret images as landscapes of hills and valleys, the watershed algorithm gradually flood the valleys starting from their lowest points (the image local minima). When the flooding of two minima meet at a sadle their remain distinct as each minima region is labelled with a distinct value. The flooding is stopped when all the image is flooded. As object don't always covers the whole image a threshold can be set stoping region evolution before the entire flooding. Alternatively the flooding can be started from local maxima. Image 1 shows the flooding of 3 peaks for different value of the treshold parameter.

==H-Maxima principle==
Image with maxima selection for != h value

==Interactive watershed motivations==

H,T parameter space image




[ref Soille]
[ref Najman 1996]
[ref Najman 2010]
[ref Arbealez 1996]
[ref Lotufo]

==Usage==

UI image (in 2D, in 3D)
Overlays image (with blobs)
Side view image

===Scripting===

in IJ macro
in Jython

==Methods and Implementation==

principle: Build a Hierarchy of segments that allow to build all H-Watershed without reprocessing the watershed

Cite paper Najman (initial paper, equivalence to hierarchy), Abealez (ultrametric), Lotufo (IFT watershed)
