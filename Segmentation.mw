= Introduction =

Image segmentation is "the process of partitioning a digital image into multiple segments." ([http://en.wikipedia.org/wiki/Image_segmentation Wikipedia])

[[File:Segmentation-overlay.jpg|link=]] [[File:Segmentation-boundaries.jpg|link=]]

It is typically used to locate ''objects'' and ''boundaries''.

More precisely, image segmentation is the process of ''assigning a label'' to every pixel in an image such that pixels with the same label share certain visual characteristics.

= Easy workflow =

One option which is designed to be very powerful, yet easy to use for non-experts in image processing:

<font size="5">&lt; [[Trainable Weka Segmentation]] &gt;</font>

Give it a tryâ€”you might like it!

= Flexible workflow =

One good workflow for segmentation in ImageJ is as follows:

# Preprocess the image using filters, to make later thresholding more effective. Which filter(s) to use is highly dependent on your data, but some commonly useful filters include:
#* [[:Category:Deconvolution|Deconvolution]]
#* [http://imagej.net/docs/guide/146-29.html#sub:Subtract-Background... Subtract Background]
#* [http://imagej.net/docs/guide/146-29.html#sub:Gaussian-Blur... Gaussian Blur]
#* [http://imagej.net/docs/guide/146-29.html#sub:Find-Edges Find Edges]
# Apply a [[Segmentation#Adjusting Threshold | threshold]].
#* Ideally you want to use one of the auto-threshold methods, rather than manually tweaking, so that your result is reproducible later on the same data, and on multiple other datasets.
# Create and manipulate a [[Segmentation#Creating Masks| mask]]
# [[Segmentation#Selections#Creating Selections | Create and transfer]] a selection from a mask to your original image
# Do some numerical analysis on the selected data; e.g.:
#* [http://imagej.net/docs/guide/146-30.html#sub:Measure...%5Bm%5D Measure] the entire selection directly.
#** Control which measurements are done using [http://imagej.net/docs/guide/146-30.html#sub:Set-Measurements... Set Measurements].
#* Use [http://imagej.net/docs/guide/146-30.html#sub:Analyze-Particles... Analyze Particles] to extract desirable objects from your selection and report individual statistics on them.
#* Use the [http://imagej.net/docs/guide/146-30.html#fig:The-ROI-Manager ROI Manager] to '''Add''' the selection and then '''Split''' it (under the '''More''' button), then use '''Multi Measure''' (also under '''More''') to report statistics on the objects.
#* [[Macros_Intro|Write a macro]] to automate this sort of analysis, loop over objects in the ROI manager, measure and manipulate them, etc.

=Adjusting Threshold=
*Open your image in the fiji window
*Select Image>Adjust
*Specify whether or not the background should be dark or light
*Adjust the minimum and maximum sliders until you are satisfied with the saturation level of your image
**[http://imagej.net/docs/guide/146-28.html#sub:Threshold...%5BT%5D More information]
=Creating Masks=
*Select Edit>Selection>Create Mask
*Based on the image and set threshold, some portions of the image may be over/under saturated
**Select the portion of the image that needs to be adjusted
**Select [http://imagej.net/docs/guide/146-29.html#sub:Dilate Dilate] to grow the included pixels to further saturate this portion of the image or [http://imagej.net/docs/guide/146-29.html#sub:Erode Erode] to remove saturation
***[http://imagej.net/docs/guide/146-29.html#infobox:InvertedLutMask More information].

=Selections=
==Creating Selections==
*Select Edit>Selection>Create Selection to select the objects within the mask
*To deselect a portion of the image, select Shift+Click
**[http://imagej.net/docs/guide/146-27.html#sub:Create-Selection More information]

==Transferring Selections==
*Before transferring the mask's selections, revert the image to its original form by selecting Shift+E
*Select first the mask, then the original image, and select Shift+E to transfer the mask's selections
**[http://imagej.net/docs/guide/146-27.html#infobox:TransferSelections More information]

= See also =

For a list of Fiji plugins which perform image segmentation, see: [[:Category:Segmentation]].
