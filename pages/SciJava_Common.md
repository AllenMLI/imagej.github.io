---
autogenerated: true
title: SciJava Common
breadcrumb: SciJava Common
layout: page
author: test author
categories: 
description: test description
---

SciJava Common is a common library for [SciJava](SciJava "wikilink")
software. It provides a plugin framework, with an extensible mechanism
for service discovery, backed by its own annotation processor, so that
plugins can be loaded dynamically. It is used by both
[ImageJ](ImageJ "wikilink") and [SCIFIO](SCIFIO "wikilink").

# Plugin framework

First and foremost, SciJava Common is a plugin framework—a base for
developing highly modular and extensible Java applications.

## Plugin discovery

All plugins available on Java's classpath are automatically discovered
and made available. This is accomplished by scanning classpath resources
for the file path `META-INF/json/org.scijava.plugin.Plugin`. Such files
are generated at compile time by a Java annotation processor that writes
them in response to `@Plugin` annotations on Java classes, an idea
inspired by the [SezPoz](https://github.com/jglick/sezpoz/) project.

# Application container

All program state, such as available plugins, is accessible from a root
object known as the *application context*.

## Services

{% capture includecontent %} TODO {% endcapture %}

{% include imagej1 content=includecontent %} ImageJ encapsulates its
various parts as separate "services" that provide related state
functionality and track related program state. An instance of the {%
capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`class is nothing more than a collection of these services; this instance is referred to as the "application gateway." Services are defined as interfaces, with concrete implementations as plugins. This design provides `[`seams`](http://c2.com/cgi/wiki?SoftwareSeam)` in the right places so that behavior at every level can be customized and overridden.`

### SciJava services

Here are a few of SciJava Common's major core services:

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks software
applications (SCIFIO, ImageJ, etc.) present in the context.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks available
displays, as well as the active display, and provides the means to
create new displays to visualize data.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Publishes events to
the [event bus](wikipedia:Publish%E2%80%93subscribe_pattern "wikilink"),
and allows interested parties to subscribe to them. The service provides
the central means of communication between various parts of the
codebase.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - General tools for
opening and saving data within the context.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Builds the
application menu structure.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks available
modules, and provides the infrastructure for executing them.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks available
objects of various types, including {% capture includecontent %} TODO {%
endcapture %}

{% include javadoc content=includecontent %} s and {% capture
includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} s.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tools for managing
program settings.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Provides hooks for
extending the application's behavior depending on the deployment
platform (operating system, version of Java, etc.).

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks available
plugins, and provides the infrastructure for executing them (using the
{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ).

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Provides utilities
for running scripts and macros.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Publishes status
updates for ongoing operations.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Manages
multithreading.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tracks available
tools—logic binding user input to behavior—as well as the active tool
(selected on the toolbar).

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Discovers and
launches a user interface for interacting with ImageJ.

### ImageJ services

Some of the services which ImageJ adds:

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tools for creating
and managing image data.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Similar to {% capture
includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} , but specifically for {%
capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} s.

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Tools for creating
and managing image overlays and regions of interest (ROIs).

### SCIFIO services

SCIFIO provides several additional services—in particular:

  - '''

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} ''' - Service for managing
available image formats.

# Menuing system

The SciJava menuing system is divided into several layers, to make it
easier to override its behavior or customize its appearance in a user
interface.

## Modules

Each module known to the system (via the {% capture includecontent %}
TODO {% endcapture %}

{% include javadoc content=includecontent %}

`can have a menuPath that says where it should live (by default) in the menu. It also has a menuRoot that says in `*`which`*` menu it should live, with the default being the APPLICATION_MENU_ROOT, indicating the main application menu structure.`

## MenuService

The {% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`takes care of constructing`

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`tree structures for all available modules in the system, using their menuPath and menuRoot values. These tree structures are UI-agnostic. There is one ShadowMenu per menuRoot, which can be requested at will from the MenuService.`

## User interfaces

The {% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`then takes care of constructing an actual UI-specific menu bar (or whatever UI components and/or widgets it wants) from the available ShadowMenus. There is a type hierarchy beneath the`

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`interface intended for this purpose; for example, the`

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`implements MenuCreator to create and maintain a Swing`

{% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %}

`that reflects the state of a particular ShadowMenu.`

## How changes propagate

When modules are added, removed or changed (via {% capture
includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} , {% capture includecontent
%} TODO {% endcapture %}

{% include javadoc content=includecontent %} , {% capture includecontent
%} TODO {% endcapture %}

{% include javadoc content=includecontent %} ), the `MenuService`
listens and updates the associated `ShadowMenu`(s) accordingly. It
notifies interested parties that it has done so by firing a
corresponding event: {% capture includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} , {% capture includecontent
%} TODO {% endcapture %}

{% include javadoc content=includecontent %} , or {% capture
includecontent %} TODO {% endcapture %}

{% include javadoc content=includecontent %} .

# API Version History

A history of API changes is available at:
https://abi-laboratory.pro/java/tracker/timeline/scijava-common/

# Further reading

  - [SciJava web site](https://scijava.org/)

  - [SciJava Common
    presentation](https://scijava.org/scijava-common/scijava-common.html)

  - 
{% include github content='TODO' %}

  - 
{% include github content='TODO' %}
