---
autogenerated: true
title: SciJava Common
breadcrumb: SciJava Common
layout: page
author: test author
categories: 
description: test description
---

SciJava Common is a common library for [SciJava](SciJava "wikilink")
software. It provides a plugin framework, with an extensible mechanism
for service discovery, backed by its own annotation processor, so that
plugins can be loaded dynamically. It is used by both
[ImageJ](ImageJ "wikilink") and [SCIFIO](SCIFIO "wikilink").

# Plugin framework

First and foremost, SciJava Common is a plugin framework—a base for
developing highly modular and extensible Java applications.

## Plugin discovery

All plugins available on Java's classpath are automatically discovered
and made available. This is accomplished by scanning classpath resources
for the file path `META-INF/json/org.scijava.plugin.Plugin`. Such files
are generated at compile time by a Java annotation processor that writes
them in response to `@Plugin` annotations on Java classes, an idea
inspired by the [SezPoz](https://github.com/jglick/sezpoz/) project.

# Application container

All program state, such as available plugins, is accessible from a root
object known as the *application context*.

## Services

ImageJ encapsulates its various parts as separate "services" that
provide related state functionality and track related program state. An
instance of the  class is nothing more than a collection of these
services; this instance is referred to as the "application gateway."
Services are defined as interfaces, with concrete implementations as
plugins. This design provides
[seams](http://c2.com/cgi/wiki?SoftwareSeam) in the right places so that
behavior at every level can be customized and overridden.

### SciJava services

Here are a few of SciJava Common's major core services:

  - **** - Tracks software applications (SCIFIO, ImageJ, etc.) present
    in the context.
  - **** - Tracks available displays, as well as the active display, and
    provides the means to create new displays to visualize data.
  - **** - Publishes events to the [event
    bus](wikipedia:Publish%E2%80%93subscribe_pattern "wikilink"), and
    allows interested parties to subscribe to them. The service provides
    the central means of communication between various parts of the
    codebase.
  - **** - General tools for opening and saving data within the context.
  - **** - Builds the application menu structure.
  - **** - Tracks available modules, and provides the infrastructure for
    executing them.
  - **** - Tracks available objects of various types, including s and s.
  - **** - Tools for managing program settings.
  - **** - Provides hooks for extending the application's behavior
    depending on the deployment platform (operating system, version of
    Java, etc.).
  - **** - Tracks available plugins, and provides the infrastructure for
    executing them (using the ).
  - **** - Provides utilities for running scripts and macros.
  - **** - Publishes status updates for ongoing operations.
  - **** - Manages multithreading.
  - **** - Tracks available tools—logic binding user input to
    behavior—as well as the active tool (selected on the toolbar).
  - **** - Discovers and launches a user interface for interacting with
    ImageJ.

### ImageJ services

Some of the services which ImageJ adds:

  - **** - Tools for creating and managing image data.
  - **** - Similar to , but specifically for s.
  - **** - Tools for creating and managing image overlays and regions of
    interest (ROIs).

### SCIFIO services

SCIFIO provides several additional services—in particular:

  - **** - Service for managing available image formats.

# Menuing system

The SciJava menuing system is divided into several layers, to make it
easier to override its behavior or customize its appearance in a user
interface.

## Modules

Each module known to the system (via the  can have a `menuPath` that
says where it should live (by default) in the menu. It also has a
`menuRoot` that says in *which* menu it should live, with the default
being the `APPLICATION_MENU_ROOT`, indicating the main application menu
structure.

## MenuService

The  takes care of constructing  tree structures for all available
modules in the system, using their `menuPath` and `menuRoot` values.
These tree structures are UI-agnostic. There is one `ShadowMenu` per
`menuRoot`, which can be requested at will from the `MenuService`.

## User interfaces

The  then takes care of constructing an actual UI-specific menu bar (or
whatever UI components and/or widgets it wants) from the available
`ShadowMenu`s. There is a type hierarchy beneath the  interface intended
for this purpose; for example, the  implements `MenuCreator` to create
and maintain a Swing  that reflects the state of a particular
`ShadowMenu`.

## How changes propagate

When modules are added, removed or changed (via , , ), the `MenuService`
listens and updates the associated `ShadowMenu`(s) accordingly. It
notifies interested parties that it has done so by firing a
corresponding event: , , or .

# API Version History

A history of API changes is available at:
<https://abi-laboratory.pro/java/tracker/timeline/scijava-common/>

# Further reading

  - [SciJava web site](https://scijava.org/)

  - [SciJava Common
    presentation](https://scijava.org/scijava-common/scijava-common.html)

  - 
  -
SciJava Common is a common library for [SciJava](SciJava "wikilink")
software. It provides a plugin framework, with an extensible mechanism
for service discovery, backed by its own annotation processor, so that
plugins can be loaded dynamically. It is used by both
[ImageJ](ImageJ "wikilink") and [SCIFIO](SCIFIO "wikilink").

# Plugin framework

First and foremost, SciJava Common is a plugin framework—a base for
developing highly modular and extensible Java applications.

## Plugin discovery

All plugins available on Java's classpath are automatically discovered
and made available. This is accomplished by scanning classpath resources
for the file path `META-INF/json/org.scijava.plugin.Plugin`. Such files
are generated at compile time by a Java annotation processor that writes
them in response to `@Plugin` annotations on Java classes, an idea
inspired by the [SezPoz](https://github.com/jglick/sezpoz/) project.

# Application container

All program state, such as available plugins, is accessible from a root
object known as the *application context*.

## Services

ImageJ encapsulates its various parts as separate "services" that
provide related state functionality and track related program state. An
instance of the  class is nothing more than a collection of these
services; this instance is referred to as the "application gateway."
Services are defined as interfaces, with concrete implementations as
plugins. This design provides
[seams](http://c2.com/cgi/wiki?SoftwareSeam) in the right places so that
behavior at every level can be customized and overridden.

### SciJava services

Here are a few of SciJava Common's major core services:

  - **** - Tracks software applications (SCIFIO, ImageJ, etc.) present
    in the context.
  - **** - Tracks available displays, as well as the active display, and
    provides the means to create new displays to visualize data.
  - **** - Publishes events to the [event
    bus](wikipedia:Publish%E2%80%93subscribe_pattern "wikilink"), and
    allows interested parties to subscribe to them. The service provides
    the central means of communication between various parts of the
    codebase.
  - **** - General tools for opening and saving data within the context.
  - **** - Builds the application menu structure.
  - **** - Tracks available modules, and provides the infrastructure for
    executing them.
  - **** - Tracks available objects of various types, including s and s.
  - **** - Tools for managing program settings.
  - **** - Provides hooks for extending the application's behavior
    depending on the deployment platform (operating system, version of
    Java, etc.).
  - **** - Tracks available plugins, and provides the infrastructure for
    executing them (using the ).
  - **** - Provides utilities for running scripts and macros.
  - **** - Publishes status updates for ongoing operations.
  - **** - Manages multithreading.
  - **** - Tracks available tools—logic binding user input to
    behavior—as well as the active tool (selected on the toolbar).
  - **** - Discovers and launches a user interface for interacting with
    ImageJ.

### ImageJ services

Some of the services which ImageJ adds:

  - **** - Tools for creating and managing image data.
  - **** - Similar to , but specifically for s.
  - **** - Tools for creating and managing image overlays and regions of
    interest (ROIs).

### SCIFIO services

SCIFIO provides several additional services—in particular:

  - **** - Service for managing available image formats.

# Menuing system

The SciJava menuing system is divided into several layers, to make it
easier to override its behavior or customize its appearance in a user
interface.

## Modules

Each module known to the system (via the  can have a `menuPath` that
says where it should live (by default) in the menu. It also has a
`menuRoot` that says in *which* menu it should live, with the default
being the `APPLICATION_MENU_ROOT`, indicating the main application menu
structure.

## MenuService

The  takes care of constructing  tree structures for all available
modules in the system, using their `menuPath` and `menuRoot` values.
These tree structures are UI-agnostic. There is one `ShadowMenu` per
`menuRoot`, which can be requested at will from the `MenuService`.

## User interfaces

The  then takes care of constructing an actual UI-specific menu bar (or
whatever UI components and/or widgets it wants) from the available
`ShadowMenu`s. There is a type hierarchy beneath the  interface intended
for this purpose; for example, the  implements `MenuCreator` to create
and maintain a Swing  that reflects the state of a particular
`ShadowMenu`.

## How changes propagate

When modules are added, removed or changed (via , , ), the `MenuService`
listens and updates the associated `ShadowMenu`(s) accordingly. It
notifies interested parties that it has done so by firing a
corresponding event: , , or .

# API Version History

A history of API changes is available at:
<https://abi-laboratory.pro/java/tracker/timeline/scijava-common/>

# Further reading

  - [SciJava web site](https://scijava.org/)

  - [SciJava Common
    presentation](https://scijava.org/scijava-common/scijava-common.html)

  - 
  -
