---
autogenerated: true
title: ImageJ1-ImageJ2 cheat sheet
breadcrumb: ImageJ1-ImageJ2 cheat sheet
layout: page
author: test author
categories: Tutorials,Development
description: test description
---

This page summarizes translation of basic operations of ImageJ1 and
ImageJ2 API. Based on the work of {% include person content='TODO' %} ,
Scientific Computing Facility, MPI-CBG Dresden.

<table>
<thead>
<tr class="header">
<th><p>Task</p></th>
<th><p>ImageJ1</p></th>
<th><p>ImageJ2</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Starting ImageJ</p></td>
<td><div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">new</span> ij.<span class="fu">ImageJ</span>();</a></code></pre></div></td>
<td><div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" title="1">ImageJ ij = <span class="kw">new</span> net.<span class="fu">imagej</span>.<span class="fu">ImageJ</span>();</a>
<a class="sourceLine" id="cb2-2" title="2">ij.<span class="fu">ui</span>().<span class="fu">showUI</span>();</a></code></pre></div></td>
</tr>
<tr class="even">
<td><p>Show images</p></td>
<td><p><code>imp</code> is an <code>ImagePlus</code> object</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" title="1">imp.<span class="fu">show</span>()</a></code></pre></div></td>
<td><div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb4-1" title="1">ij.<span class="fu">ui</span>().<span class="fu">show</span>(imp);</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb5-1" title="1">ImageJFunctions.<span class="fu">show</span>(imp);</a></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb6-1" title="1">ImageJFunctions.<span class="fu">wrap</span>(imp,<span class="st">&quot;Image&quot;</span>).<span class="fu">show</span>();</a></code></pre></div></td>
</tr>
<tr class="odd">
<td><p>Retrieve an active image object</p></td>
<td><div class="sourceCode" id="cb7"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb7-1" title="1">ImagePlus imp = IJ.<span class="fu">getImage</span>();</a></code></pre></div></td>
<td><p>Script parameter (the same for <code>Dataset</code>, <code>ImagePlus</code>, etc.):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb8-1" title="1">#@ Img image</a></code></pre></div>
<p>In Java code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb9-1" title="1"><span class="at">@Parameter</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">private</span> Img image;</a></code></pre></div>
<p>Using <code>ImageDisplayService</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb10-1" title="1">Dataset image = ij.<span class="fu">imageDisplay</span>().<span class="fu">getActiveDataset</span>();</a></code></pre></div></td>
</tr>
<tr class="even">
<td><p>Open an image file</p></td>
<td><p><code>IJ.openImage()</code> returns an <code>ImagePlus</code> object without showing.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb11-1" title="1">ImagePlus imp = IJ.<span class="fu">openImage</span>(urlOrFilePath);</a>
<a class="sourceLine" id="cb11-2" title="2">imp.<span class="fu">show</span>();</a></code></pre></div>
<p><code>IJ.open()</code> automatically shows the image without returning <code>ImagePlus</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb12-1" title="1">IJ.<span class="fu">open</span>(urlOrFilePath);</a>
<a class="sourceLine" id="cb12-2" title="2">ImagePlus imp = IJ.<span class="fu">getImage</span>();</a></code></pre></div></td>
<td><p>Using <code>IOService</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb13-1" title="1"><span class="bu">Object</span> image = ij.<span class="fu">io</span>().<span class="fu">open</span>(urlOrFilePath);</a></code></pre></div>
<p>Using <code>DatasetIOService</code> (for type safety):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb14-1" title="1">Dataset image = ij.<span class="fu">scifio</span>().<span class="fu">datasetIO</span>().<span class="fu">open</span>(urlOrFilePath);</a></code></pre></div></td>
</tr>
<tr class="odd">
<td><p>Save an image file</p></td>
<td><div class="sourceCode" id="cb15"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb15-1" title="1">IJ.<span class="fu">saveasTiff</span>(imp, <span class="st">&quot;/path/to/image.tif&quot;</span>)</a></code></pre></div></td>
<td><p>Using <code>IOService</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb16-1" title="1">ij.<span class="fu">io</span>().<span class="fu">save</span>(dataset, <span class="st">&quot;/path/to/image.tif&quot;</span>);</a></code></pre></div>
<p>Using <code>DatasetIOService</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb17-1" title="1">ij.<span class="fu">scifio</span>().<span class="fu">datasetIO</span>().<span class="fu">save</span>(dataset, <span class="st">&quot;/path/to/image.tif&quot;</span>);</a></code></pre></div></td>
</tr>
<tr class="even">
<td><p>Convert image types</p></td>
<td><p>Convert from ImageJ2 Img object to ImageJ1 <code>ImagePlus</code> object:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb18-1" title="1">ImagePlus imp = ImageJFunctions.<span class="fu">wrap</span>(img,<span class="st">&quot;Title&quot;</span>);</a></code></pre></div></td>
<td><p>Convert from ImageJ1 <code>ImagePlus</code> object to ImgLib2 <code>Img</code> object:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb19-1" title="1">Img&lt;T&gt; realImg = ImageJFunctions.<span class="fu">wrapReal</span>(imp);</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb20-1" title="1">Img&lt;FloatType&gt; floatImg = ImageJFunctions.<span class="fu">convertFloat</span>(imp);</a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb21-1" title="1">Img&lt;FloatType&gt; realImg2 = ImageJFunctions.<span class="fu">wrap</span>(imp);</a></code></pre></div></td>
</tr>
<tr class="odd">
<td><p>Show regions</p></td>
<td><div class="sourceCode" id="cb22"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb22-1" title="1">imagePlus.<span class="fu">setRoi</span>(roi)</a></code></pre></div></td>
<td><div class="sourceCode" id="cb23"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb23-1" title="1">Img&lt;BitType&gt; mask; <span class="co">// = ...</span></a>
<a class="sourceLine" id="cb23-2" title="2">ImagePlus maskImp =ImageJFunctions.<span class="fu">wrap</span>(mask, <span class="st">&quot;mask&quot;</span>);</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">// threshold the mask to get an ROI</span></a>
<a class="sourceLine" id="cb23-4" title="4">ImageProcessor imageProcessor = maskImp.<span class="fu">getProcessor</span>();</a>
<a class="sourceLine" id="cb23-5" title="5">imageProcessor.<span class="fu">setThreshold</span>(<span class="dv">128</span>,<span class="dv">128</span>,ImageProcessor NO_LUT_UPDATE);</a>
<a class="sourceLine" id="cb23-6" title="6">Roi roi = <span class="kw">new</span> <span class="fu">ThresholdToSelection</span>().<span class="fu">convert</span>(imageProcessor);</a>
<a class="sourceLine" id="cb23-7" title="7">imagePlus.<span class="fu">setRoi</span>(roi);</a></code></pre></div></td>
</tr>
<tr class="even">
<td><p>Run plugins</p></td>
<td><div class="sourceCode" id="cb24"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb24-1" title="1">IJ.<span class="fu">run</span>(imagePlus,<span class="st">&quot;Normalisation&quot;</span>,<span class="st">&quot;&quot;</span>);</a></code></pre></div></td>
<td><div class="sourceCode" id="cb25"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb25-1" title="1">ij.<span class="fu">command</span>().<span class="fu">run</span>(ImageNormalizerIJ2Plugin.<span class="fu">class</span>, <span class="kw">true</span>, <span class="st">&quot;input&quot;</span>, img, <span class="st">&quot;ij&quot;</span>, ij);</a></code></pre></div></td>
</tr>
<tr class="odd">
<td><p>Define plugins</p></td>
<td><div class="sourceCode" id="cb26"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">public</span> <span class="kw">class</span> ImageNormalizerPlugin <span class="kw">implements</span> PluginFilter {</a>
<a class="sourceLine" id="cb26-2" title="2">  ...</a>
<a class="sourceLine" id="cb26-3" title="3">}</a></code></pre></div>
<p>In <code>resources/plugins.config</code>:</p>
<pre><code>Plugins&gt;Filtering, &quot;Normalisation&quot;, NormalizerPlugin</code></pre></td>
<td><div class="sourceCode" id="cb28"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb28-1" title="1"><span class="at">@Plugin</span>(type = Command.<span class="fu">class</span>, menuPath = <span class="st">&quot;Plugins&gt;Normalization&quot;</span>)</a>
<a class="sourceLine" id="cb28-2" title="2"><span class="kw">public</span> <span class="kw">class</span> ImageNormalizerIJ2Plugin <span class="kw">implements</span> Command {</a>
<a class="sourceLine" id="cb28-3" title="3">  ...</a>
<a class="sourceLine" id="cb28-4" title="4">}</a></code></pre></div></td>
</tr>
</tbody>
</table>

## See also

https://github.com/mpicbg-scicomp/ij2course-images/blob/master/slides/ij_legacy_cheetsheet.pdf

[Category:Tutorials](Category:Tutorials "wikilink")
[Category:Development](Category:Development "wikilink")
