=  Stack-slice manipulations =
==  Slice shuffling/removing/Adding ==
Once imported, the slices in each stack can be manipulated in many ways. See images below for explanation of some of these functions

Deleting single slice: “''Image/Stacks/Delete Slice''"
*Deletes the first slice in a stack.

Deleting a number of slices: “''Image/Stacks/Tools/Slice remover''”
*Indicate the first and last slices in the range to remove, as well as increment between slices.

Select the slices to remove: “''Image/Stacks/Tools/Make substack''”
*Indicate a range or list of slices to include in substack; increments are possible.
*Option to delete the slices included from the original stack.

Stack to images/Images to stack: “''Image/Stacks/Stack to images” (Images to Stack…''). 
*“''Images to Stack''” requires images to be the same size. If different sized images, will be presented with options to make uniform.
*When using "Images to Stack", the original images will close once the stack is formed.

Montage: "''Image/Stack/Make Montage…''" 
*Many settings are self explanatory. 
*Ideal for generating a montage of a stack for a lab book.
*Can do reverse operation with "''Image/Stack/Tools/Montage to Stack''", but will need to specify the number of rows and columns to ensure the correct number of slices.

Reversing stack: “''Image/Stacks/Tools/Reverse''"

Concatenate: “''Image/Stacks/Tools/Concatenate''"
*Stacks must be the same dimension and image type.
*"Open as a 4D Image" option interprets separate stacks as belonging to a single 4D dataset. For example, concatenating two 25-slice stacks would result in a 25-slice stack with two different time points at each slice.

Stack Combine: “''Image/Stacks/Tools/Combine''”
*Can choose which stack comes first
*If a different number of slices in the two stacks, the shorter will have blank slices appended to the end so they are the same length.

(De)Interleave: “''Image/Stacks/Tools/DeInterleave”'' and “''/Interleave''”
*Deinterleave will distribute slices between new stacks as indicated by the specified number of channels.
*Interleave is the reverse process and may be applied to two stacks at a time.

Stack Inserter: “''Image/Stacks/Tools/Insert''"
*Used with two stacks, one is the source and the other the destination.
*Superimpose the source by specifying the (X,Y) coordinates for the location of the upper left hand corner.
*No automatic resizing, so the smaller stack should not be used as the destination.

Stack Sorter: “''Image/Stacks/Tools/Stack Sorter''”.
*Control the position of individual slices or groups of slice. *Advanced “Insert” functionality.

[[File:stack_slice_manipulations1.png]]

==  Stack dimension manipulations ==
Images and stacks can be resized and rotated with native functions or the more sophisticated TransformJ set of plugins from Erik Meijering. These are found in the “''Plugins/Transform/TransformJ'' ” menu list.

E. H. W. Meijering, W. J. Niessen, M. A. Viergever, [http://www.ncbi.nlm.nih.gov/pubmed/11516706 Quantitative Evaluation of Convolution-Based Methods for Medical Image Interpolation], ''Medical Image Analysis'', vol. 5, no. 2, June 2001, pp. 111-126.

More details about each plugin in the menu can be found on [http://www.imagescience.org/meijering/software/transformj/ this website.]

== Zoomify plugin[[Image:Zoomed.gif]]==

This plugin will generate a movie sequence so that the first frame includes the whole image and the last is the user defined ROI at 100%. The first slice image is the whole of the original&nbsp; image, scaled so that it fits in to the framesize of the ROI, the intermediate images as progressively scaled so that the last frame is 100%. The scale factor is noted as the label slice in the stack.

The user selects an ROI which will become the final frame and is prompted to enter the desire number of frames in the movie.

&nbsp;

==Align slices in stack==

The plugin "''Plugins/Stacks - shuffling/Align Slices''" is the [http://bigwww.epfl.ch/thevenaz/stackreg/ StackReg] (plus [http://bigwww.epfl.ch/thevenaz/turboreg/ TurboReg]) plugins from bundled. The plugin takes a stack with misaligned slices and aligns the slices with respect to the current slice. Open stack, scroll to the most centred slice and run the plugin. "Rigid body" method seems to produce the best results for microscopy images.

Based on:

P. Thévenaz, U.E. Ruttimann, M. Unser, "[http://bigwww.epfl.ch/publications/thevenaz9801.html A Pyramid Approach to Subpixel Registration Based on Intensity]," IEEE Transactions on Image Processing, vol. 7, no. 1, pp. 27-41, January 1998.

'''Time series before alignment'''[[Image:stack.1.gif]]

'''After'''[[Image:stack.2.gif]]

&nbsp;

|}



[[Category:Cookbook]]
