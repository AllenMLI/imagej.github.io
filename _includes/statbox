{% comment %}
A sidebar with statistics about a software component, user, or other topic.

There are two main modes:
1. Manually specified metadata fields; or
2. Metadata fields inferred from a Maven groupId:artifactId coordinate.

The former mode gives full control over what gets populated, but the sidebar
must be updated manually as new releases are made, etc.

Conversely, the latter mode is more succinct, deriving information by scraping
a maven-metadata.xml (to determine the most recent release version of the
component) and subsequently the corresponding Maven POM file containing the
information. This mode relies on JavaScript to populate the fields.

The two modes can be combined, in case some fields require manual override;
the javascript only populates fields when they are empty.
{% endcomment %}

{%- if page.artifact -%}
<script src="/assets/js/maven.js"></script>
<script>
populateComponent('{{page.artifact}}', '{{page.repository}}');
</script>
{%- endif -%}

<div id="statbox">
<h3>Vital statistics</h3>
<table>
{%- if page.logo -%}
  <tr>
    <td id="component-logo" colspan="2">
      <img src="{{page.logo}}">
    </td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.component-name -%}
  <tr>
  <th>Component</th>
  <td id="component-name">{{page.component-name}}</td>
  </tr>
{%- endif -%}
{%- if page.project -%}
  <tr>
  <th>Project</th>
  <td id="component-project">{{page.project}}</td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.source-url -%}
{%- capture source-label -%}
{%- if page.source-label -%}
{{page.source-label}}
{%- elsif {{page.source-url | truncate: 19}} == 'https://github.com/' -%}
on GitHub
{%- elsif {{page.source-url | truncate: 19}} == 'https://gitlab.com/' -%}
on GitLab
{%- elsif {{page.source-url | truncate: 22}} == 'https://bitbucket.org/' -%}
on BitBucket
{%- else -%}
online
{%- endif -%}
{%- endcapture -%}
  <tr>
  <th>Source</th>
  <td id="component-source"><a href="{{page.source-url}}">{{source-label}}</a></td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.license-url -%}
  <tr>
  <th>License</th>
  <td id="component-license"><a href="{{page.license-url}}" title="{{page.license-label}}">{{page.license-label}}</a></td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.release-url -%}
  <tr>
  <th>Release</th>
  <td id="component-release"><a href="{{page.release-url}}">{{page.version}}</a></td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.date -%}
  <tr>
  <th>Date</th>
  <td id="component-date">{{page.release-date}}</td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.dev-status -%}
  <tr>
  <th>Development status</th>
  <td id="component-dev-status">{{page.dev-status}}</td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.support-status -%}
  <tr>
  <th>Support status</th>
  <td id="component-support-status">{{page.support-status}}</td>
  </tr>
{%- endif -%}
{%- if page.artifact || page.team-founders || page.team-leads || page.team-developers || page.team-debuggers || page.team-reviewers || page.team-support || page.team-maintainers || page.team-contributors -%}
  <tr>
    <td colspan="2" style="padding: 0">
      <details>
        <summary style="text-align: center">
          <span class="tooltip" style="font-variant: small-caps">Team
            <span class="tooltiptext">The group of people who take responsibility for the project.</span>
          </span>
        </summary>
        <table id="team">
{%- if page.artifact || page.team-founders -%}
{%- include team-members title="Founders" description="People who created the project. Does not imply any current participation or responsibility." members=page.team-founders -%}
{%- endif -%}
{%- if page.artifact || page.team-leads -%}
{%- include team-members title="Leads" description="People responsible for making decisions about the project: timing of releases, inclusion of features, etc." members=page.team-leads -%}
{%- endif -%}
{%- if page.artifact || page.team-developers -%}
{%- include team-members title="Developers" description="People responsible for adding new features or enhancements." members=page.team-developers -%}
{%- endif -%}
{%- if page.artifact || page.team-debuggers -%}
{%- include team-members title="Debuggers" description="People responsible for fixing bugs." members=page.team-debuggers -%}
{%- endif -%}
{%- if page.artifact || page.team-reviewers -%}
{%- include team-members title="Reviewers" description="People responsible for reviewing patch submissions." members=page.team-reviewers -%}
{%- endif -%}
{%- if page.artifact || page.team-support -%}
{%- include team-members title="Support" description="People responsible for responding to community questions and issue reports." members=page.team-support -%}
{%- endif -%}
{%- if page.artifact || page.team-maintainers -%}
{%- include team-members title="Maintainers" description="People responsible for maintaining the project: e.g., merging patch submissions and cutting releases." members=page.team-maintainers -%}
{%- endif -%}
{%- if page.artifact || page.team-contributors -%}
{%- include team-members title="Contributors" description="People who contributed code to the project. Does not imply any current participation or responsibility." members=page.team-contributors -%}
{%- endif -%}
        </table>
      </details>
    </td>
  </tr>
{%- endif -%}
</table>
</div>
