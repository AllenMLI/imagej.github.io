<center>[[File:ClearVolumeLogo.png]]</center>

== What is ClearVolume? ==
ClearVolume is a volume renderer developed at MPI-CBG. Its sources are open and can be cloned from [https://github.com/ClearVolume on GitHub]. We hope to provide our users soon with an adequate publication that can be cited in case you used ClearVolume for your research.

== Screenshots ==
<center>[[File:ClearVolumeInFiji.png|border|750px|thumb|The main ClearVolume plugin can render volumetric multi-channel data. Channel LUTs, transparency, rendering quality, etc. can easily be set in the plugins user interface. We thank Tzumin Lee's group at Janelia for being allowed to use their twin-spot MARCM (Yu et al., Nature Neuroscience, 2009) labeled neurons.]]</center>
<center>[[File:ClearVolumeNetworkClientInFiji.png|750px|thumb|The ClearVolume network client can be started from Fiji/ImageJ2 and enables users to receive volumetric data from a remote source, e.g. live from a microscope in the basement of your collaborators institute.]]</center>

See ClearVolume in action: [https://www.youtube.com/watch?v=IyUpkgTJJvc https://www.youtube.com/watch?v=IyUpkgTJJvc]

== Installing ClearVolume in Fiji or ImageJ2 ==

''BIG Disclaimer:'' ClearVolume can run in Fiji and does so on many machines. Unfortunately this integration comes with two caveats that we are working on removing in the future. Please go on reading the following lines carefully and you will have no problem getting a Fiji instance run ClearVolume also on your machine.

''Caveat 1:'' ClearVolume only runs in Fiji installations that never started up the Fiji 3D Viewer Plugin using a Java Virtual Machine that never executed the before mentioned Fiji installation.
Ok, that is one hell of a sentence and if it does not speak to you you might want to ask your favorite geek in the room.
The reason for this is, that the 3D Viewer, upon first startup, downloads a very old version of some 3D libraries (jogl and Java3d) and puts them in a folder 'inside' your Java Virtual Machine ('ext'). From that moment on ClearVolume cannot find his own jogl version any longer since Fiji is not capable of separating (isolating) the class path per plugin.
How to circumvent the problem:
  1) Download a JRE or JDK that you will use as described below.
  2) Download a new Fiji and put it next to the existing one. 
     Never open the 3D Viewer plugin in that Fiji installation.

''Caveat 2:'' ClearVolume requires Fiji/ImageJ2 to run with a Java Runtime Environment >1.6. This adds additional steps to the installations instructions that will be obsolete as soon as Fiji/ImageJ2 will ship with newer versions of Java.

So how can this mess be avoided? We are currently trying to implement a way to isolate the ClearVolume class loader from the one of Fiji. Unfortunately this is a lot of dirty work, but we are at it.
Caveat 2 will solve itself soon. It was announced earlier this year that Fiji will eventually by default run with Java 1.7 or 1.8.

# Download Fiji or ImageJ2 from [http://imagej.net/Downloads here].
# Start Fiji/ImageJ2 and launch the updater ('''Help - Update...''')
# Click on '''Manage update sites''', tick the box next to '''ClearVolume''', and hit '''Close'''.
# Confirm the update/installation by clicking '''Apply changes''' and restart Fiji/ImageJ as suggested by the updater.

Depending on your operating system you will now have to ensure to run Fiji/ImageJ with a Java Runtime Environment >1.6.

; Windows
* If you do not have installed Java, do so by following [https://www.java.com/en/download/help/download_options.xml these instructions]. We recommend you to install the latest version (unless you know what you are doing).
* Open '''Fiji.app''' and delete the containing folder '''java''' from it if it exists. This will prevent that Fiji/ImageJ2 launches the outdated Java version it currently ships with.

; MacOS (>OSX 10.8 only, since OpenGL 4.0 must be supported)
* If you do not have installed Java, do so by following [https://www.java.com/en/download/help/download_options.xml these instructions]. We recommend you to install the latest version (unless you know what you are doing).
* Currently Fiji/ImageJ2 has to be run from a terminal window in order to use launch using a user installed Java version. Detailed instructions can be found [http://fiji.sc/Frequently_Asked_Questions#How_do_I_launch_ImageJ_with_a_different_version_of_Java.3F in this FAQ].
* A typical launch command would then look similar to this: 
*: <code>/Applications/Fiji.app/Contents/MacOS/ImageJ-macosx --java-home /Library/Java/JavaVirtualMachines/jre1.8.0_25.jdk/Contents/Home/</code>

; Linux
* If you do not have installed Java, do so by following [https://www.java.com/en/download/help/download_options.xml these instructions]. We recommend you to install the latest version (unless you know what you are doing).
* Currently Fiji/ImageJ2 has to be run from a terminal window in order to use launch using a user installed Java version. Detailed instructions can be found [http://fiji.sc/Frequently_Asked_Questions#How_do_I_launch_ImageJ_with_a_different_version_of_Java.3F in this FAQ].
* A typical launch command would then look similar to this: 
*: <code>$HOME/ImageJ.app/ImageJ-linux64 --java-home /usr/lib/jvm/java-7-openjdk-amd64</code>

'''''MacOS/Linux Nerd Tip:''''' Edit the file '''.bash_profile''' (Mac) or '''.bashrc''' (Linux) located in your home folder and add an adequately modified line like:
: <code>alias fiji='/Applications/Fiji.app/Contents/MacOS/ImageJ-macosx --java-home /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/'</code> (Mac)
: <code>alias fiji='$HOME/ImageJ.app/ImageJ-linux64 --java-home /usr/lib/jvm/java-7-openjdk-amd64'</code> (Linux)
: After restarting the terminal you can start Fiji simply by typing '''<code>fiji</code>'''.

== Other ways to use ClearVolume ==
; KNIME
: The ClearVolume team provides a plugin for KNIME Image Processing. See [http://tech.knime.org/book/clearvolume this page] for details.
; Stand-alone
: The original purpose of ClearVolume is to bring live volumetric rendering to modern microscopy. Please check the [https://clearvolume.github.io/ClearVolume/ wiki on GibHub] for detailed informations.

== Contact ==
Feature requests and bug reports can be posted on GitHub.
For any further questions please contact any of us
* Florian Jug (jug@mpi-cbg.de)
* Loic Royer (royer@mpi-cbg.de)
* Martin Weigert (weigert@mpi-cbg.de)
* Ulrik GÃ¼nther (guenther@mpi-cbg.de)
