---
autogenerated: true
title: ImageJ1-ImageJ2 cheat sheet
categories: Tutorials,Development
---

This page summarizes translation of basic operations of ImageJ1 and ImageJ2 API. Based on the work of {% include person id='haesleinhuepf' %}, Scientific Computing Facility, MPI-CBG Dresden.

{::nomarkdown}
<table>
  <thead>
    <tr class="header">
      <th style="text-align:left;">
        <p>Task</p>
      </th>
      <th>
        <p>ImageJ1</p>
      </th>
      <th>
        <p>ImageJ2</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr class="odd">
      <td>
        <p>Starting ImageJ</p>
      </td>
      <td>
{%- highlight java -%}
new ij.ImageJ();
{%- endhighlight -%}
      </td>
      <td>
{%- highlight java -%}
ImageJ ij = new net.imagej.ImageJ();
ij.ui().showUI();
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="even">
      <td>
        <p>Show images</p>
      </td>
      <td>
        <p><code>imp</code> is an <code>ImagePlus</code> object</p>
{%- highlight java -%}
imp.show();
{%- endhighlight -%}
      </td>
      <td>
{%- highlight java -%}
ij.ui().show(imp);
ImageJFunctions.show(imp);
ImageJFunctions.wrap(imp,"Image").show();
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="odd">
      <td>
        <p>Retrieve an active image object</p>
      </td>
      <td>
{%- highlight java -%}
ImagePlus imp = IJ.getImage();
{%- endhighlight -%}
      </td>
      <td>
        <p>Script parameter (the same for <code>Dataset</code>, <code>ImagePlus</code>, etc.):</p>
{%- highlight plain -%}
#@ Img image
{%- endhighlight -%}
        <p>In Java code:</p>
{%- highlight java -%}
@Parameter
private Img image;
{%- endhighlight -%}
        <p>Using <code>ImageDisplayService</code>:</p>
{%- highlight java -%}
Dataset image = ij.imageDisplay().getActiveDataset();
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="even">
      <td>
        <p>Open an image file</p>
      </td>
      <td>
        <p><code>IJ.openImage()</code> returns an <code>ImagePlus</code> object without showing.</p>
{%- highlight java -%}
ImagePlus imp = IJ.openImage(urlOrFilePath);
imp.show();
{%- endhighlight -%}
        <p><code>IJ.open()</code> automatically shows the image without returning <code>ImagePlus</code>.</p>
{%- highlight java -%}
IJ.open(urlOrFilePath);
ImagePlus imp = IJ.getImage();
{%- endhighlight -%}
      </td>
      <td>
        <p>Using <code>IOService</code>:</p>
{%- highlight java -%}
Object image = ij.io().open(urlOrFilePath);
{%- endhighlight -%}
        <p>Using <code>DatasetIOService</code> (for type safety):</p>
{%- highlight java -%}
Dataset image = ij.scifio().datasetIO().open(urlOrFilePath);
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="odd">
      <td>
        <p>Save an image file</p>
      </td>
      <td>
{%- highlight java -%}
IJ.saveasTiff(imp, "/path/to/image.tif")
{%- endhighlight -%}
      </td>
      <td>
        <p>Using <code>IOService</code>:</p>
{%- highlight java -%}
ij.io().save(dataset, "/path/to/image.tif");
{%- endhighlight -%}
        <p>Using <code>DatasetIOService</code>:</p>
{%- highlight java -%}
ij.scifio().datasetIO().save(dataset, "/path/to/image.tif");
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="even">
      <td>
        <p>Convert image types</p>
      </td>
      <td>
        <p>Convert from ImageJ2 Img object to ImageJ1 <code>ImagePlus</code> object:</p>
{%- highlight java -%}
ImagePlus imp = ImageJFunctions.wrap(img,"Title");
{%- endhighlight -%}
      </td>
      <td>
        <p>Convert from ImageJ1 <code>ImagePlus</code> object to ImgLib2 <code>Img</code> object:</p>
{%- highlight java -%}
Img<T> realImg = ImageJFunctions.wrapReal(imp);
Img<FloatType> floatImg = ImageJFunctions.convertFloat(imp);
Img<FloatType> realImg2 = ImageJFunctions.wrap(imp);
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="odd">
      <td>
        <p>Show regions</p>
      </td>
      <td>
{%- highlight java -%}
imagePlus.setRoi(roi);
{%- endhighlight -%}
      </td>
      <td>
{% highlight java %}
Img<BitType> mask; // = ...
ImagePlus maskImp = ImageJFunctions.wrap(mask, "mask");
// threshold the mask to get an ROI
ImageProcessor imageProcessor = maskImp.getProcessor();
imageProcessor.setThreshold(128, 128, ImageProcessor.NO_LUT_UPDATE);
Roi roi = new ThresholdToSelection().convert(imageProcessor);
imagePlus.setRoi(roi);
{% endhighlight %}
      </td>
    </tr>
    <tr class="even">
      <td>
        <p>Run plugins</p>
      </td>
      <td>
{%- highlight java -%}
IJ.run(imagePlus,"Normalisation","");
{%- endhighlight -%}
      </td>
      <td>
{%- highlight java -%}
ij.command().run(ImageNormalizerIJ2Plugin.class, true,
                 "input", img, "ij", ij);
{%- endhighlight -%}
      </td>
    </tr>
    <tr class="odd">
      <td>
        <p>Define plugins</p>
      </td>
      <td>
{%- highlight java -%}
public class ImageNormalizerPlugin implements PluginFilter {
  ...
}
{%- endhighlight -%}
        <p>In <code>resources/plugins.config</code>:</p>
{%- highlight plain -%}
Plugins>Filtering, "Normalisation", NormalizerPlugin
{%- endhighlight -%}
      </td>
      <td>
{%- highlight java -%}
@Plugin(type = Command.class, menuPath = "Plugins>Normalization")
public class ImageNormalizerIJ2Plugin implements Command {
  ...
}
{%- endhighlight -%}
      </td>
    </tr>
  </tbody>
</table>
{:/}

## See also

{% include github org="mpicbg-scicomp" repo="ij2course-images" path="slides/ij_legacy_cheetsheet.pdf" %}
