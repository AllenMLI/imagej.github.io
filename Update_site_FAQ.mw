{{UpdateSites}}

== How do I make my update site appear in ImageJ's ''Manage update sites'' dialog? ==

The dialog is based on the [[List of update sites]] wiki page. You can edit that page to add your own update site.

== How do I remove a file from my update site? ==

An update site is a [https://en.wikipedia.org/wiki/Revision_control revision control] system where nothing is ever really deleted from the history.

Hence, there are two levels of removal: marking a file '''obsolete''', and '''deleting a file completely from the history''':

=== Marking a file obsolete ===

You can mark any file previously uploaded as obsolete.  This will not delete old versions of the file, but will ensure anyone updating to the latest version of your update site will no longer download that file:
# If the file is not hosted by any other active update site, delete it from your local installation. Note: if the file '''is''' hosted on another update site, this is called '''shadowing'''—you do not need to delete the file as marking it obsolete will revert it to the other update site's version.
# Start the [[Updater|updater]] and click the ''Advanced mode'' button.
# Select the ''View files of the '[your site name here]''' option.
# '''NB:''' If you deleted the file in step 1, it will be marked "'''Install it'''" automatically by the updater—right click the file and change it to "Keep as-is". See [[#Why don't I have an upload option?|Why don't I have an upload option?]] below for an explanation.
# Right click and choose "Mark obsolete" for the deleted file.
# Upload the changes.

=== Deleting a file completely from the history ===

Deleting a file from the history is strongly not recommended, but if you ''must'' do so (e.g., for legal or privacy reasons):
* If you using a [[Personal Update Sites|personal update site]], then [[Help:Contents|contact an ImageJ administrator]] to have the offending file(s) removed.
* If you are hosting your own update site, then you must delete all versions of the file from the file system, ''and'' edit the ''db.xml.gz'' file to remove the ''<plugin>'' entry as well as any ''<dependency>'' elements in other entries which reference it.

== What are the Terms of Service for personal update sites? ==

# You agree to use your personal update site only for ImageJ extensions, and not hosting content for any other purpose.
# You grant permission for anyone enabling your update site to use the functionality it provides for any legal purpose whatsoever.
# You agree that you are making your functionality available free of charge, without any DRM, license codes or similar restrictions.
# It is strongly encouraged, but not required, for your functionality to use an [[open source]] license.

== How do I set a password for my personal update site? ==

Use [[Special:ChangeUploadPassword|this page]] to set a password for ''uploading'' content.

If you want to restrict which users can ''access'' your update site, please note that the [[Personal Update Sites]] service is only intended for freely available plugins. To restrict user access, you will need to host the update site yourself, sharing the URL only with your customers. Implementing an authentication scheme on top of an ImageJ update site is outside the scope of ImageJ—consider using something like [http://oauth.net/ OAuth].

== How do I delete my personal update site? ==

If you want to completely remove your update site, [[Help:Contents|contact an ImageJ administrator via the mailing list]] to have the site removed.

== Can I manipulate the files on my update site directly? (E.g., via WebDAV?) ==

Please don't! Update sites are intended to be accessed ''only'' via ImageJ's [[Updater]]. There is important metadata in the ''db.xml.gz'' file which ''must'' be kept in sync with the files in the directory structure. Otherwise, your update site will stop working properly.

== Why don't I have an upload option? ==

When working with the updater, it's important to understand that there are two types of operations: upload and download. To avoid corrupting local or remote plugin databases, the two classes of operation are mutually exclusive—if actions of one type are scheduled, actions of the other type will not be available. For most users, the updater only performs download operations and this is not an issue. However, when managing an update site, there can be scenarios of conflict between these operations.

A typical sequence of events:

* You start the updater
* The updater sees new remote updates and marks them for installation/update.
* Or, the updater sees you deleted a file (i.e. one you are about to mark obsolete) and flags it for installation—since it's still tracked by the remote update site.
* You try to mark your file to upload it, but the Upload to server/Obsolete options are not available.

To continue with your upload, you have to resolve the pending downloads in one of two ways:

* If there are legitimate pending updates, perform the download/installation and restart Fiji.
* If you deleted files locally to make them obsolete, mark the files "Keep as-is".

The ''View changes'' option is helpful to identify what downloads are pending. Once all of these are at a neutral state—with everything up-to-date or keep as-is—you can start flagging your files for upload as intended.
