This plugin provides a more impartial and mathematically sound way of calculating interplanar spacing, which makes it more accurate than [[calc dSpace|calc dSpace]]. It is also easier to use on diffraction patterns where it is hard to tell which reflections originate at like planes in the crystal. Get dSpace helps the user figure this out.

== How it Works ==
A threshold is applied to the diffraction pattern that the user can manipulate so it suites their image. The centroid of the thresholded region is then found, and the d-spacing value is calculated for each spot as the inverse of the distance from the center spot. If you did not use a beamstop for image capture, the direct beam spot corresponds to one of the spots in the image, and the user tells the plugin which spot to use. If a beamstop was used for image capture, then the user picks a pair of spots symmetric about the direct beam spot and the plugin finds the center from those two positions. It then bins the measurements according to their difference and plots the values for the user to see and confirm that it is binning like reflections and coming up with an accurate value for that plane.

== Directions ==
=== Getting Started ===
This is the window that opens up when you first start the plugin. All you need for the plugin to work is an opened diffraction pattern that is calibrated and saved as a .dm3 file.
[[File:First_Window1.jpg|550px|center]]
*'''Minimum diffraction spot size:''' is one less pixel than the number of pixels you choose as constituting a diffraction spot. It is good for ignoring cosmic rays that might be captured in your DP, and small fringe spots that sometimes show up near diffraction spots.
*'''Beamstop Status:''' choose the appropriate option regarding whether or not a beamstop was used to block the direct beam.
*'''Binning Size:''' this sets a value in the plugin that is used to distinguish between like planes (110, 101, and 011) and different planes (100, 110, 111,...). 
*'''Display modes:''' these options allow the user to operate the plugin in three different modes. The ''Measurements'' mode does not give you a summary plot or table, which is convenient if you are optimizing your settings for a single DP. The ''Summary'' mode closes the two measurement windows (so you don't have to) and only shows the summary table and plot. ''All'' leaves all four windows open, so you see everything.
*'''d-spacing list:''' yet a fifth window that you can enable, which allows you to view the list of d-spacing values in a text window on a single line.

=== Adjust Threshold ===
Once you click the "OK" button on the first window. Your DP will be duplicated, and converted to 8-bit. The auto threshold routine is run and the usual threshold window appears. You can use the sliders to adjust thresholding levels to optimize your image. When you are happy with the thresholding, click the "OK" button on the window below to proceed. 
[[File:Adjust_Threshold_1.jpg|300px|center]]
This is a wait-for-user window that stalls the plugin until you are ready for it to move forward.

=== Direct Beam Spot ===
After you click "OK" to proceed, each diffraction spot is measured and labelled, and a new window pops up (shown below) that the asks you to help the software find the direct beam spot. This is the most critical part of the process because the center of the direct beam is the point from which all distances are calculated.
[[File:Direct_Beam_Center_1.jpg|300px|center]]
If you ''have not'' used a beamstop, then a simpler window appears that just asks you which label corresponds to the direct beam, and the centroid of that spot is used for the calculations. For example,in the image below, spot 24 is the direct beam spot.

If you ''have'' used a beamstop to cover the direct beam then you must enter the labels corresponding to a spot pair in the image that have mirror symmetry in any plane drawn through the direct beam and perpendicular to the image plane. For example, in the image below, spots 12 and 39 would be a good choice. Note: you can use this setup for an image without the beamstop too, if you just enter the direct beam spot twice. 

Finally, there is a box for artifacts in the image. Artifacts usually occur as a result of the beamstop or small spurious spots that form near the direct beam spot in lower contrast regions. The number entered in this box is the number of values that are trimmed from the list of d-spacing. Just remember you are removing your largest values of d. For example, with the beamstop retracted, the direct beam will have a d-spacing of infinity, so it is an artifact that we would want to remove. The beamstop ''retracted'' option does this automatically, but it doesn't let you remove more spots, to do that you can use the beamstop ''inserted'' option.

=== Measurements ===
[[File:Measurements_1.jpg|900px|center]]

=== Results Windows ===
[[File:Results_Windows_1.jpg|900px|center]]
