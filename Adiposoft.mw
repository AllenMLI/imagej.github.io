{{Infobox
| software               = ImageJ
| name                   = Adiposoft
| author                 = Miguel Galarraga
| maintainer             = [mailto:mgalarraga@unav.es Miguel Galarraga]
| released               = September 2012
| latest version         = September 2012
| status                 = stable, active
| category               = [[:Category:Segmentation|Segmentation]]
}}

[[File:screenshot1.jpg|350px]]

Adiposoft is an automated Open Source software for the analysis of adipose tissue cellularity in histological sections. Adiposoft has been developed as a plug-in for FIJI (advanced distribution of ImageJ) that can be run under Windows, Linux or MacOS X. The software –that can be downloaded and used with no license restrictions- was developed at the Imaging Unit of the Center for Applied Medical Research (CIMA) of the University of Navarra.

== Motivation ==

The accurate estimation of the number and size of adipocytes provides relevant information about the growth kinetics and the physiological status of a given tissue or organ. Adiposoft is an automated, open source software for the analysis of white adipose tissue cellularity on histological, hematoxylin and eosin (H&E) stained sections.

[[Image:datasetim.png|center|500px]]

== Installation == 
Download the installation package specific for your Operating System in the next section. To install Adiposoft, execute the installer file and follow the instructions. The full version installers install both Adipsoft and FIJI at the same time. 

== Adiposoft versions. Download == 
The latest version of Adiposoft is 1.0. (Updated April 20th, 2012)
* '''Windows'''. Adiposoft+FIJI full version installer ([https://dl.dropboxusercontent.com/u/4235078/SW/Setup.exe Download])
* '''Linux'''. Adiposoft+FIJI full version installer ([https://dl.dropboxusercontent.com/u/4235078/SW/AdipsoftLinux.zip Download])
* '''MacOS''' X. Adiposoft+FIJI full version installer ([https://dl.dropboxusercontent.com/u/4235078/SW/Adiposoft.pkg.zip Download])
* Adiposoft '''Plugin''' ([https://dl.dropboxusercontent.com/u/4235078/SW/AdiposoftPlugin.zip Download]). To install the Plugin only if you already have FIJI installed in your computer, download and uncompress the Plugin in the folder that contains FIJI

== Running Adiposoft == 
If you installed Adiposoft from one of the full version installers, you will find Adiposoft’s icon in the Applications folder (Windows, MacOS X) or in the folder selected during the installation (Linux). Depending on your operating System, you may also have a link to Adiposoft on your computer desktop.

=== Starting Adiposoft ===
To run Adiposoft, double-click on Adiposoft’s icon. This will start FIJI and open the main Adiposoft dialogue window. If at any time you close Adiposoft, you can always restart it by clicking on the “red A button” in the FIJI toolbar.

=== Selection of Parameters ===
On Adiposoft’s main dialogue window you can choose several parameters of the analysis. Namely:

* Auto mode: By checking on the “Auto mode” box, you choose to run Adiposoft in completely automated mode, without any user intervention, as it will described in the following section “Automated analysis”.
* Manual mode: If you uncheck the “Auto mode” box, you choose to have the opportunity to manually edit the results of the initial automated segmentation. This includes manually adding, deleting, splitting or merging adipocytes. The editing tools can be accessed through a toolbar attached to the image that is being edited. The editor gets activated after the initial automated analysis is done. This option is only available when the images are analyzed one by one (“One Image), and not in batch mode (“A Directory” or “A list of nested Directories – Batch Mode” ). The editing actions will be explained in the section “Manual analysis”
* Output units. By default, the areas and diameters of the adipocytes are calculated and reported in “Pixels”. If the calibration of the images is known, you can select “Microns”, but be ready to introduce the number of microns that correspond to one pixel of your images in the dialogue window that will appear when you press OK.
* How many images do you wan to analyze. You can choose to run Adiposoft to analyze one image at a time (“One Image”), a directory that contains all the images that you want to analyze (“A Directory”) or a directory and all directories below (“A list of nested Directories – Batch Mode”).

After pressing OK, you will be prompted to select the image that you want to analyze, the directory that contains the images -if you choose to analyze a “A Directory”- or the parent directory -if you choose to analyze “A list of nested Directories”-.

Next you will be prompted to choose –or create- the output directory where you want to store the results of the analysis.

=== Automated analysis ===
If you choose to run Adiposoft in Automated mode, the program analyzes the selected images, and stores the results in the output directory, namely:

If you chose to analyze “One Image”, the output directory will contain an image with the results of the segmentation overlaid on the original image and an excel file containing the complete list of adipocytes with their area and equivalent diameter.
If you chose to analyze “A Directory”, the output directory will contain an excel file with the list of adipocytes of all the images, with their area and parameters, and a directory named as the original input directory containing all the segmented images and one excel file per image, containing the results of that particular image.
If you chose to analyze “A list of Directories”, the output folder will contain a tree of directories replicating the input tree, but containing the results of the analysis.

=== Manual analysis ===
If you chose to run Adiposoft in Manual mode, the program analyzes the selected image automatically and then offers the option to edit the results, using one of the editing options from a toolbar that appears attached to the segmented image. This toolbar contains the following buttons:
Close: Closes the window and stores the results in the selected output directory
Results: Displays the Results window, that contains a list of all the adipocytes with their corresponding morphological information. The running numbers in the first column correspond to the label displayed on the segmentation results window. The list contains, for each adipocyte, the area and diameter.
* Add (Draw). Allows drawing a closed contour that may correspond to the boundary of a cell that was not initially detected.
* Del: Deletes an object, possibly corresponding to an incorrectly segmented adipocyte, or a tissue part incorrectly classified as being an adipocyte. When prompted, click on the object that you want to delete and press OK.
* Merge: Merges two objects, possibly two parts of an incorrectly divided adipocyte. To this end, you can draw a closed contour. The final –merged- cell will contain –as a single object- the new area defined by the closed contour plus the areas of all cells touched by the contour. 
* Separate: Divides an object in two parts, based on a line drawn by the user.
* Undo: Reverts the last action done.
* Help: Displays the help guide for the plugin.

== Image DataSet ==
A set of images of histological sections obtained from three different rat tissue depots –retroperitoneal (RP), mesenteric (MES) and subcutaneous (SC)- can be downloaded and used to test Adiposoft. (Download)

== Other ImageJ plugins ==
Other related ImageJ plugins are available for download:
Manual Segmentation with ImageJ – (Download)
Cells in Suspension ImageJ – (Download)

== Tools ==
Metamorph Macro (Molecular Devices, USA) that automated the automated acquisition of the images of the histological samples with the microscope.


== Installing Adiposoft as a FiJi plugin (for users familiar with FIJI) ==
If you are familiar with Fiji, and you have it already installed in your computer, you can download only the plugin for Fiji.
* ADIPOSOFT - FIJI (ImageJ) Plugin (Download)

1) If you do not have Fiji installed in your computer, you can download it here
Note: There is only limited support for PowerPC (G4/G5) Macs. See MacOSX tips for a special download link.
2) Once Fiji is installed you should extract the Adiposoft_Fiji.zip file into the plugins folder inside Fiji ("/YourPath/Fiji/plugins/") Adiposoft tool will appear in the plugins menu the next time you start Fiji.

== Adiposoft under MATLAB (advanced users) ==
A version of Adiposoft was entirely developed using MATLAB v.7.11 and the DIPlib v2.2 C Image Processing libraries [11] under Linux OS Fedora 14. To run Adiposoft, the same or newer version of this software is required, but the OS can be different. Matlab requires a non-free license.
ADIPOSOFT - MATLAB Version (Download)

Before installing Adiposoft under Matlab you must download and install the DIP Image libraries DIPlib v2.2 C, which can be downloaded here. 
After installing DIPlib you must to extract the AdiposoftMatlab.zip file.
To run Adiposoft, execute the .m file inside Matlab 

Note: Installing Adiposoft can be a bit tricky under Matlab, due to compatibility problems between the versions of DIPlib and Matlab. We will be pleased to help you with the installation. To that end, please contact mgalarraga@unav.es for help.
