{{Scripting}}All scripting languages have access to a universal <code>@parameter</code> notation for declaring inputs and outputs. This approach is preferred to using ImageJ 1.x <code>GenericDialog</code> because it is totally agnostic of the user interface, allowing such scripts to run in a variety of contexts. As with [[Writing_ImageJ2_plugins|ImageJ2 plugins]], script parameterization is based on the [[SciJava]] [https://github.com/scijava/scijava-common/blob/scijava-common-2.40.0/src/main/java/org/scijava/plugin/Parameter.java @Parameter annotation]—so experience with plugin writing directly translates to scripting, and vice versa. 

== Basic syntax ==

The rules for <code>@parameter</code> use are as follows:

<ol>
<li>All parameter declarations must appear in comments. Each comment line contains a single parameter declaration and nothing else.</li>
<li>Any parameters after the first non-parameter line will not be recognized.</li>
<li><code>@type variableName</code> will declare an input of the indicated type, assigned to the specified name.</li>
<li><code>@OUTPUT type outputName</code> will declare the variable of the specified name as an output parameter with the given type.</li>
</ol>

{{Testimonial
| quote = zomg UIs are so easy now<br>done by lunchtime
| person = {{Person|kephale}},<br>Clojure developer
| gravatar = 9e4ed4484fd425f3f178bfeed4777b31
| source = https://gitter.im/fiji/fiji/archives/2016/04/20
| float = right
}}
For example, if we look at the [https://github.com/scijava/scripting-jython/blob/scripting-jython-0.2.0/src/main/resources/script_templates/Python/Greeting.py Greeting.py] [[Script_Templates|template]] supplied with Fiji:

<source lang="python">
# @String name
# @OUTPUT String greeting

# A Jython script with parameters.
# It is the duty of the scripting framework to harvest
# the 'name' parameter from the user, and then display
# the 'greeting' output parameter, based on its type.

greeting = "Hello, " + name + "!"
</source>

We see that an input parameter <code>name</code> of type <code>String</code> is declared. <code>@arameters</code> are handled automatically by the framework; if we run this script when the User Interface is available (e.g. from the script editor), the <code>name</code> parameter will automatically be harvested via a pop-up dialog:


[[File:ScriptParams.png|450px]]


We could also run this script [[Scripting Headless|headlessly]], thanks to the general nature of <code>@parameters</code>.

When the script is completed, any <code>@OUTPUT</code> variables are handled by the framework, based on their type. In this case we expect the <code>greeting</code> variable to be printed, since it is a <code>string</code>.


{{Warning | Note that if we added an extra comment to the top of our script we would break the script, as the parameters would not be harvested or displayed due to violation of the second parameter rule: <source lang="python">
# Because of this comment, the following parameters will NOT be recognized
# @String name
# @OUTPUT String greeting</source>}}

== Parameter types ==

A list of possible data types and the corresponding widgets is provided:

{| style="wikitable nicetable"
| '''Data type'''
| '''Widget type'''
|-
| | <code>boolean</code> {{!}} <code>Boolean</code>
| checkbox
|-
| | <code>byte</code> {{!}} <code>short</code> {{!}} <code>int</code> {{!}} <code>long</code>
| numeric field
|-
| | <code>Byte</code> {{!}} <code>Short</code> {{!}} <code>Integer</code> {{!}} <code>Long</code>
| numeric field
|-
| | <code>BigInteger</code> {{!}} <code>BigDecimal</code>
| numeric field
|-
| | <code>char</code> {{!}} <code>Character</code> {{!}} <code>String</code>
| text field
|-
| | <code>Dataset</code> {{!}} <code>ImagePlus</code>
| (>=2 images) triggers a dropdown list
|-
| | <code>ColorRGB</code>
| color chooser
|-
| | <code>Date</code>
| date chooser
|-
| | <code>File</code>
| file chooser
|}

By implementing {{Javadoc | project = SciJava | package = org/scijava/widget | class = InputWidget}} it is possible to extend this list.

== Parameter properties ==

If you look at the [https://github.com/scijava/scijava-common/blob/scijava-common-2.40.0/src/main/java/org/scijava/plugin/Parameter.java @Parameter annotation], you will notice it has many properties—for example, <code>name</code> and <code>description</code>.

Script parameters can set these properties, following these guidelines:

<ol>
<li>All properties are defined in a '''single parenthetical expression''' immediately following the <code>@Type</code> declaration.</li>
<li>Properties are set by a [https://docs.oracle.com/javase/tutorial/java/annotations/basics.html comma-separated list of '''key=value''' pairs]</li>
</ol>

Properties are your way to customize how an <code>@parameter</code> should be handled by the framework.

=== Widget labels ===

Widgets are the User Interface elements shown to users to collect input information. For example, instead of just displaying "Name" to the user, we can add a custom label to the field of our <code>Greeting.py</code> script as follows:

<source lang="python">
# @String(label="Please enter your name") name
# @OUTPUT String greeting

greeting = "Hello, " + name + "!"
</source>

=== Widget mouseover ===

We can add a <code>description</code> property to provide mouse-over text for our field:

<source lang="python">
# @String(label="Please enter your name", description="Your name") name
# @OUTPUT String greeting

greeting = "Hello, " + name + "!"
</source>

=== Default values ===

Default values are also supported as parameter properties:

<source lang="python">
# @Integer(label="An integer!",value=15) someInt
</source>

=== Multiple Choice ===

Any parameter can be turned into a multiple-choice selector by adding a <code>choices = {...}</code> property:

<source lang="python">
# @String(label="What mythical monster would you like to unleash?",choices={"Kraken","Cyclops","Medusa","Fluffy bunny"}) monsterChoice
</source>

=== Files and Folders ===

By default, a <code>@File</code> parameter will create a chooser for a single file:

<source lang="python">
# @File(label="Select a file") myFile

print(myFile)
</source>

If you want to select a directory instead, use a <code>style</code> property:

<source lang="python">
# @File(label="Select a directory", style="directory") myDir

print(myDir)
</source>

[[Category:Scripting]]
