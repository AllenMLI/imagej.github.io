{{SNTNavBar}}
[[Category:SNT]][[Category:Neuroanatomy]]
<div class="toclimit-3">

SNT's Reconstruction Viewer is a powerful OpenGL 3D visualization tool for both surface meshes and reconstructions
* It can be used as a standalone program or from withing SNT
* Features:
** Advanced rendering supporting axes, transparency, color interpolation and path smoothing
** Interactive scenes (controlled rotations, panning, zoom, scaling, animation, "dark"/"light" mode)
** Tools for management and customization of scene elements
** Ability to render both local and remote files on the same scene
** Loading of surface meshes of several template brains (Drosophila and Allen CCF (Allen Mouse Brain Atlas))

=Starting the Viewer=
The Reconstruction Viewer may be used as either a standalone program or from within SNT. To open Reconstruction Viewer as a standalone program, go to {{bc|Plugins|NeuroAnatomy|Reconstruction Viewer}}. To open the program from within SNT, use the "Open Reconstruction Viewer" option in the 3D tab of the SNT dialog. If there are any tracings currently loaded in SNT, they will be displayed in Reconstruction Viewer after opening. Note that, for performance reasons, some Path Manager changes may need to be synchronized manually from RV controls.

=Scene Interaction=
[[Image:reconstruction-viewer-example-scene.png|right|thumb|400px|]]
The display canvas supports multiple modes of interaction, including controlled rotations, panning, zoom, scaling, animation, and alternation between "dark" and "light" modes.

*'''Panning'''  {{Key|Right-Click}} + {{Key|Drag}}
*'''Rotation''' {{Key|Left-Click}} + {{Key|Drag}} or Left/Right arrow keys
*'''Zoom'''     Scroll the mouse wheel or use the {{Key|+}}/{{Key|-}} keys
*'''Animation''' Double {{Key|Left-Click}}
*'''Snap to Top/Side View''' {{Key|Ctrl}} + {{key|Left-Click}}
*'''Toggle Axes''' {{Key|A}}
*'''Toggle Camera Mode''' {{key|C}}
*'''Toggle Dark Mode''' {{key|D}}
*'''Fit View to Visible Objects''' {{key|F}}
*'''Reset View''' {{key|R}}
*'''Snapshot''' {{key|S}}
*'''Help''' {{key|H}} (notification) or {{key|F1}} (list)

=RV Controls=
==Scene Controls==
[[Image:reconstruction-viewer-scene-controls.png|right|thumb|400px|]]
This menu provides control over the rendered scene.
*'''Fit to Visible Objects''' Computes a bounding box containing all objects of the scene and adjusts the zoom level to ensure all objects are within the camera view.
*'''Stretch-to-Fill''' Stretches the projection on the whole viewport.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-not-stretched.png|none|thumb|200px|Stretch-to-Fill - disabled]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-stretched.png|none|thumb|200px|Stretch-to-Fill - enabled]] </li>
</ul>
</div>
*'''Impose Isotropic Scale''' Squares the aspect ratio of the selected dimensions, leaving the others unchanged.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-aspect-ratio-none.png|none|thumb|200px|Impose Isotropic Scale - None]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-aspect-ratio-ZY.png|none|thumb|200px|Impose Isotropic Scale - ZY]] </li>
</ul>
</div>
*'''Reload Scene''' Resets the zoom level to the default, fitting and centering all scene objects into the camera view. The current rotation setting remains unchanged. Note if some drawables in the 3D scene are not being rendered properly when this option is selected, it will prompt to rebuild the scene completely.
*'''Rebuild Scene''' Clears all objects from the scene then rebuilds them from scratch. 
*'''Wipe Scene''' Removes all objects from the scene. Note this action cannot be undone.
*'''Sync Path Manager Changes''' If the 3D scene contains any trees that are currently stored in the Path Manager, re-render these trees to reflect any change in the path structure given by the Path Manager.

==Manage and Customize Neuronal Arbors==
This menu relates to the import, customization and management of rendered reconstructions.
[[Image:reconstruction-manage-arbors-menu.png|right|thumb|400px|]]
*'''Import File...''' Imports and renders a single reconstruction file (".swc" or ".traces"). A color may be chosen on import or applied later using the "Customize" sub-menu. Note that loaded files will not be listed in the Path Manager.
*'''Import Directory...''' Imports and renders all reconstruction files in a directory. A single color may be applied to all reconstructions or they may be colored uniquely. Note that loaded files will not be listed in the Path Manager.
*'''Load from Database''' Allows import and rendering of reconstruction files fetched from the FlyCircuit, MouseLight and NeuroMorpho remote databases.
*'''Customize''' A sub-menu containing color coding and rendering options for plotted reconstructions. 
**'''Assign Color...''' Assigns the chosen homogeneous color to all selected reconstructions.
**'''Color Coding (Individual Cells)...''' Applies morphometric color mapping to selected reconstructions. The chosen LUT is used to assign a metric-based color gradient to each reconstruction.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-color-mapping-individual.png|none|thumb|200px|Branch Order and Ice LUT]] </li>
</ul>
</div>
**'''Color Coding (Group of Cells)...''' Applies morphometric color coding to a selected group of reconstruction. Note that this option uses the chosen LUT to assign a homogeneous color to each reconstruction in the group based on the chosen metric.
<div align="left">
<ul>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-color-mapping-group.png|none|thumb|200px|No. Branch Points and Ice LUT]] 
</ul>
</div>
**'''Color Each Cell Uniquely''' Applies a unique homogeneous color to each selected reconstruction. Note this option will override any previously applied color mapping to the selected reconstructions.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-color-mapping-unique.png|none|thumb|200px|Unique Color Coding]] </li>
</ul>
</div>
**'''Thickness...''' Specifies a constant thickness to be applied to the selected reconstructions. Note this value will only affect how Paths are displayed in the Reconstruction Viewer.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-thickness-1.png|none|thumb|200px|Thickness = 1.0]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-thickness-5.png|none|thumb|200px|Thickness = 5.0]] </li>
</ul>
</div>
**'''Translate...''' Specifies a translation to be applied to the selected reconstructions. To avoid overwriting data from a tracing session, this command is only available in the standalone viewer.
*'''Remove Selected...''' Deletes the selected reconstructions from the scene.
*'''Remove All...''' Deletes all reconstructions from the scene.

==Manage and Customize 3D Meshes==
[[Image:reconstruction-viewer-mesh-controls.png|right|thumb|400px|]]
[[Image:reconstruction-viewer-customize-mesh-controls.png|right|thumb|400px|{{bc|Customize|All Parameters...}}]]
*'''Import OBJ File(s)...''' Allows import and rendering of Wavefront OBJ files, commonly used to represent surface meshes of anatomical structures. 
*'''Customize''' sub-menu providing control over rendering parameters of surface meshes.
**'''All Parameters...''' Allows adjustment of the color and transparency of the selected mesh(es) and their computed bounding boxes in a single menu.
**'''Color...''' Sets the color of the selected mesh(es).
**'''Transparency...''' Sets the transparency of the selected mesh(es).
*'''Remove Selected...''' Deletes the selected mesh(es) from the scene.
*'''Remove All...''' Deletes all imported mesh(es) from the scene.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-obj-transparency-5.png|none|thumb|300px|Transparency = 5%]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-obj-transparency-95.png|none|thumb|300px|Transparency = 95%]] </li>
</ul>
</div>
{{clear}}

==Reference Brains==
This menu contains several Drosophila and Mouse reference brains.
[[Image:reconstruction-reference-brains-menu.png|right|thumb|400px|]]
*'''Drosophila (Adult)''' 
**'''FlyCircuit''' FlyCircuit Drosophila reference brain
**'''JFRC2 (VFB)''' Janelia Farm Research Campus Virtual Fly Brain
**'''JFRC3''' Janelia Farm Research Campus Drosophila reference brain (Version 3)
**'''Adult VNS'''  Adult Drosophila ventral nervous system reference
*'''Drosophila (Embryonic)''' 
**'''Larva L1''' Drosophila 1st instar larval stage
**'''Larva L3''' Drosophila 3rd instar larval stage
*'''Mouse (Adult): Allen CCF Navigator''' Import and navigation system for the Allen Adult Mouse Common Coordinate Framework v3. Selecting this option imports the Whole Brain reference mesh, and presents a GUI allowing search, information, and import of Mouse Brain ontologies contained in the Allen Common Coordinate Framework v3.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-allen-ccf-ontology.png|none|thumb|200px|Allen CCF Navigator]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-allen-ccf-thalamus-info.png|none|thumb|200px|Allen CCF Ontology Info]] </li>
</ul>
</div>
*'''Zebrafish (Embryonic)'''
**'''Max Planck ZBA''' Max Planck Zebrafish Brain Atlas
<div align="center">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-flycircuit-reference.png|none|thumb|300px|FlyCircuit Drosophila (Adult)]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-whole-mouse-thalamus.png|none|thumb|300px|Allen Adult Mouse Whole Brain + Thalamus]] </li>
<li style="display:inline-block;"> [[Image:reconstruction-viewer-zebrafish-reference.png|none|thumb|300px|Max Planck ZBA]] </li>
</ul>
</div>
{{clear}}

==Analyze and Measure== 
[[Image:reconstruction-viewer-measurement-menu.png|right|thumb|400px|]]
This menu houses several functions to measure and analyze loaded reconstructions.
*'''Measure''' Shows a table of summary statistics for selected reconstructions. If measuring multiple tracings, the table can be sorted by column.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:reconstruction-viewer-measurements-AA0100.png|none|thumb|900px|AA0100 measurements]] </li>
</ul>
</div>
*'''Distribution Analysis...''' Plots a histogram of the selected metric. If multiple reconstructions are selected, a single analysis is conducted on the group.
*'''Sholl Analysis...''' Runs the [[Sholl_Analysis|Sholl Analysis]] plugin found in {{bc|Analyze|Sholl|Sholl Analysis (From Tracings)}}. Note only one reconstruction may be analysed at a time.
*'''Strahler Analysis''' Conducts Strahler Analysis on the selected reconstruction. Note only one reconstruction may be analysed at a time.

==Tool and Utilities==
[[Image:reconstruction-viewer-tools-menu.png|right|thumb|400px]]
*'''Debug Mode''' Logs detailed information about plugin usage to the Console.
*'''Take Snapshot''' Saves a PNG image of the current scene to disk. The default directory may be changed in the Reconstruction Viewer ''Preferences''.
*'''Record Rotation''' Animates a rotation of the current scene and saves each frame to disk. The save directory, rotation degree, duration and frames per second may be adjusted in the Reconstruction Viewer ''Preferences''.
*'''Color Legends''' Contains options relating to the adding and management of LUT-based color legends.
*'''Keyboard & Mouse Sensitivity''' A sub-menu with options for sensitivity of mouse and keyboard scene interaction. Note that a default shared sensitivity parameter can be specified for panning, zooming and rotating (using hotkeys) in the Reconstruction Viewer ''Preferences''.
**'''Pan Accuracy''' Sets the responsiveness of panning. A lower step size is more responsive.
**'''Rotation Steps'''Sets the number of degrees of a single rotation step. Note this preference only applies to rotations made with the Left/Right Arrow keys.
**'''Zoom Steps''' Sets the percentage of a single zoom step.
*'''Keyboard Shortcuts...''' Shows a list of all Reconstruction Viewer keyboard shortcuts.
*'''Preferences...''' Configurable preferences for snapshot recordings, keyboard and mouse controls, and the preferred scripting language for the Viewer. Preferences persist across plugin sessions.
*'''Script This Viewer...''' Opens an instance of the Script Editor with pre-loaded extensible boilerplate code for advanced scripting of Reconstruction Viewer. For an example of the scripting capabilities of Reconstruction Viewer, see ''Reconstruction Viewer Demo (Python)'' at {{bc|Templates|Neuroanatomy|Analysis}} in the Script Editor.
