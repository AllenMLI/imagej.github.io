{{Infobox
| name                   = LungJ
| author                 = [[User:LungJ|Lasse Wollatz]]
| maintainer             = [[User:LungJ|Lasse Wollatz]]
| software               = ImageJ/Fiji
| logo                   = [[Image:http://github.com/LWollatz/LungJ/raw/master/logo.png|LJ]]
| source                 = {{GitHub|org=LWollatz|repo=LungJ}}
| released               = Nov 1<sup>st</sup>, 2016
| latest version         = 0.4.9, October 28<sup>th</sup>, 2016 (LungJ v0.4.9)
| status                 = stable, new
| category               = [[:Category:Segmentation|Segmentation]], [[:Category:Binary|Binary]], [[:Category:Filtering|Filtering]], [[:Category:Image_annotation|Image annotation]]
}}{{TOC}}

Work in progress...

== Installation ==
1) {{bc | Help | Update...}}

2) Manage update sites

3) Add update site

4) Name: LungJ

5) URL: http://sites.imagej.net/LungJ/

6) Close

7) {{bc | Help | Update...}}

8) Restart Fiji/ ImageJ to apply changes.

9) A new subdirectory called LungJ appears under Plugins.

10) Future versions of LungJ will be updated together with the normal Fiji plugin updates.

== Function Documentation ==

=== 3D Blocks - Concatenate (Concatenate_3D) ===
{{bc | Plugins | LungJ | 3D Blocks | 3D Blocks - Concatenate}}

Combines 3D blocks in a directory into a single image.

=== 3D Blocks - Create (Subdivide_3D) ===
{{bc | Plugins | LungJ | 3D Blocks | 3D Blocks - Create}}

Divides a 3D image into 3D blocks and saves them into a directory along with header information in a txt file.

=== 3D Blocks - Halo Exchange (Halo_Exchange) ===
{{bc | Plugins | LungJ | 3D Blocks | 3D Blocks - Halo Exchange}}

Exchanges the halos of a 3D Blocks image. This function can be applied between filters. Halos allow the avoidance of boundary errors/ inconsistencies.

=== 3D Blocks - Histogram (Block_Histogram) ===
{{bc | Plugins | LungJ | 3D Blocks | 3D Blocks - Histogram}}

Opens the blocks of a 3D Blocks image, calculates all the relevant statistics and displays a histogram for all the blocks combined. Optionally saves the statistics to the properties directory.

=== 3D Blocks - Run Macro (Run_Macro_3D) ===
{{bc | Plugins | LungJ | 3D Blocks | 3D Blocks - Run Macro}}

Runs a macro for each 3D block in a directory and saves the resulting image blocks to a new directory.

=== Apply Binary Threshold (Create_Threshold_Mask) ===
{{bc | Plugins | LungJ | Tools | Apply Binary Threshold}}

Creates a truly binary mask based on a fixed global threshold.

=== Apply Mask (Apply_Mask) ===
{{bc | Plugins | LungJ | Tools | Apply Mask}}

Applies a mask to an image, leaving the foreground as it is and replacing the background by black.

=== Apply Weka Classifier (Apply_Weka_Classifier) ===
{{bc | Plugins | LungJ | Tools | Apply Weka Classifier}}

Applies a Weka classifier based on the filename of an image and the filename of a classifier model. This implements the whole application process in a single function and does not require loading the original image into memory twice. This function is likely to suffer from updates to the weka-segmentation plug-in.

=== Average ROIs Colour (Average_ROI_Colour) ===
{{bc | Plugins | LungJ | Other | Average ROIs Colour}}

Finds the average value or RGB of active ROIs. The expected value range is overlaid on the histogram of the active image. Error calculations are based on

Keith Dear, "An Online Text in Introductory Statistics." (1999) University of Newcastle, Australia [online]. Was available at http://surfstat.newcastle.edu.au/ and

Hans-Jürgen Andreß "Students T-Verteilung" (2001) [online]. Available at http://psydok.sulb.uni-saarland.de/volltexte/2004/268/html/surfstat/t.htm, last accessed: 22. July 2015.

=== Colour by Segment (Colorize_) ===
{{bc | Plugins | LungJ | Other | Colour by Segment}}

Combines a set of segmented images into a colour image.

=== Compare Map to Mask (Compare_MapMask) ===
{{bc | Plugins | LungJ | Statistics | Compare Map to Mask}}

Compares a probability map to a binary masks by combining them into a single colour-coded image. Agreed foreground is white and agreed background black. Foreground detected as background is blue and background detected as foreground red.

=== Compare Masks (Compare_Masks) ===
{{bc | Plugins | LungJ | Statistics | Compare Masks}}

Compares two binary masks by combining them into a single colour-coded image. Agreed foreground is white and agreed background black. Foreground detected as background is blue and background detected as foreground red.

=== Convert Mask to STL (mask_to_stl) ===
{{bc | Plugins | LungJ | Other | Convert Mask to STL}}

Takes a mask and converts and saves it as an STL file using Image Viewer 3D. This is useful if an image should be 3D printed.

=== Create MCTV Tiles (Create_MCTV_Tiles) ===
{{bc | Plugins | MCTV | Create MCTV Tiles}}

Creates jpg tiles and metadata file compatible with MCTV (code doi:10.5258/SOTON/400332
, paper doi:10.1109/eScience.2015.42).

=== Entropy ===
{{bc | Plugins | LungJ | Filter | Entropy}}

Calls the Entropy filter from
Trainable Segmentation/src/main/java/trainableSegmentation/filters/Entropy Filter.java

=== Fill Holes Manual 3D (Fill_Holes_Manual_3D) ===
{{bc | Plugins | LungJ | Tools | Fill Holes Manual 3D}}

Aims to fill holes of a mask. Ideal for filling a mask with many holes in the foreground but only one or few connected background(s).

=== Gabor (Weka_Gabor) ===
{{bc | Plugins | LungJ | Filter | Gabor}}

Applies the Gabor filter from
Trainable Segmentation/src/main/java/trainableSegmentation/FeatureStack.java

=== Invert Values (Invert_Values) ===
{{bc | Plugins | LungJ | Tools | Invert Values}}

LungJ code for inverting the values in an image. This code changes the actual values and mirrors them around the centre between minimum and maximum. Values which exceed the minimum or maximum specified are being cut of at the boundary. The GUI looks up the minimum and maximum value in an image and suggests them as defaults.

=== Label Hyperstack (Label_Hyperstack) ===
{{bc | Plugins | LungJ | Other | Label Hyperstack}}

Consistently labels the slices of a hyperstack.

=== Lipschitz ===
{{bc | Plugins | LungJ | Filter | Lipschitz}}

Calls the Lipschitz filter from Trainable_Segmentation/src/main/java/trainableSegmentation/filters/Lipschitz_.java

=== LungJ Settings (LungJ_Settings) ===
{{bc | Plugins | LungJ | LungJ Settings}}

Allows to change standard settings for LungJ. This affects mainly 3D Blocks - Run Macro but also changes the default values for some other functions.

=== Matrix Operation (Matrix_Operation) ===
{{bc | Plugins | LungJ | Filter | Matrix Operation}}

Applies a 2D matrix onto an image. Can be used for GUI implementation of non
standard matrix based filters.

=== Membrane Projections (Weka_Membrane_Projections) ===
{{bc | Plugins | LungJ | Filter | Membrane Projections}}

Applies the Membrane Projections filter from
Trainable Segmentation/src/main/java/trainableSegmentation/FeatureStack.java

=== Neighbors (Weka_Neighbors) ===
{{bc | Plugins | LungJ | Filter | Neighbors}}

Applies the Neighbors filter from
Trainable Segmentation/src/main/java/trainableSegmentation/FeatureStack.java

=== Set Calibration (Set_Calibration) ===
{{bc | Plugins | LungJ | Other | Set Calibration}}

Allows to set the Calibration of an image, similar to Image > Properties but with pixel value calibration function included.

=== Stretch Histogram (Stretch_Histogram) ===
{{bc | Plugins | LungJ | Tools | Stretch Histogram}}

Linearly stretch the values of an image.

=== Test WEKA Filter (Test_WEKA_Filter) ===
{{bc | Plugins | LungJ | Filter | Test WEKA Filter}}

Allows to compare WEKA filters visually. Note that the Gabor filter is currently not working.

== Publications ==
Lasse Wollatz, Steven Johnston, Peter Lackie, and Simon Cox (2016) “''LungJ v0.5.0''” [code] doi:[http://eprints.soton.ac.uk/id/eprint/401280 10.5258/SOTON/401280]


[[Category:Plugins]]
[[Category:Citable]]
[[Category:Segmentation]]
[[Category:Binary]]
[[Category:Filtering]]
[[Category:Image_annotation]]
