=Main Dialog=
==Main Tab==
This home tab aggregated widgets for tracing and frequent operations.

===Cursor Auto-snapping===
'''Enable Snapping checkbox''' If active (the default) the cursor snaps to the brightest voxel in its vicinity (Toggling shortcut: {{Key|S}}). To accomplish this, SNT takes the cuboid of the specified dimensions (in pixels) centered on the current cursor position and searches quickly for local maxima in that neighborhood, moving the cursor to that position. The Z-plane in which the maximum was found is automatically selected if the "Z" parameter is greater than 0. Noteworthy:
* This feature assumes the signal is brighter than the background as typically found in fluorescent images.
* If multiple maxima exist (e.g., when the signal is saturated), it snaps to their centroid.[[File:cursor-snap.png|right|border]]
* To streamline the computation:  XYZ dimensions are constrained to even numbers and limited range.
* Snapping occurs in 2D (i.e., in the active plane) if Z=0.
* The XZ, ZY views are synchronized when 3D snapping is active (i.e., Z>0).

===Auto-tracing===
[[File:SNT-auto-tracing.png|right|thumb|"Auto-tracing" widget]]
'''Enable A* Star''' By default, SNT uses the [https://en.wikipedia.org/wiki/A*_search_algorithm A* search algorithm] to automatically trace paths between two manually selected points. To manually place nodes in a path, toggle this feature off. Note that it is also possible to enable other algorithms through the installation of further SNT addons. See [[SNT: Tubular Geodesics]] for more details.

'''Hessian-based analysis''' (Toggling shortcut: {{Key|H}}) A quick way to improve the quality and efficiency of the pathfinding is to enable this feature, in which paths are computed after filtering the image for tube-like structures. Upon such filtering, SNT will use a measure of [[Tubeness]] at each point of the image to define the best path through it, based on eigenvalues and eigenvectors of the Hessian matrix. The later can be used to infer the likelihood that a point in the image belongs to a a tube-like structure. This concept is also known as ''vesselness'' or ''neuriteness''.

'''Hessian options''' (Specified in the ''gear'' drop-down menu). Hessian analysis requires two parameters to be specified:
* '''Sigma''' Controls the spatial scale of the filter. A  lower Sigma will capture small scale structure but is more sensitive to noise. A larger Sigma will consider larger scale structures but is less sensitive to local shape characteristics. It is generally advised to pick a value which reflects the average radius of the structures to be traced. It corresponds to the standard deviation of the 3D Gaussian kernel used to smooth the image prior to ''Tubeness''  filtering
* '''Maximum''' The maximum pixel intensity on the ''Tubeness'' image beyond which the cost function for A* search is minimized.

These parameters may be chosen "Manually" (if you already have a quantitative understanding of the image) or "Visually" (generally more intuitive). If you choose "Visually", the dialog will prompt you to click on a representative region of the image which has meaningful structure. Once you click there, a 9-square palette is generated showing increasing values of sigma (from top-left to bottom-right) applied to that chunk of the image. The palette is an image stack which can be scrolled through with the mouse wheel.
<center>
{|
|-
|
|colspan="3" style="text-align:center;font-size:90%" |Adusting max
|-
| [[Image:Sigma-palette-location.png|thumb|200px]]
| [[Image:Sigma-palette-max.png|none|thumb|200px]]
| [[Image:Sigma-palette-mid.png|none|thumb|200px]]
| [[Image:Sigma-palette-min.png|none|thumb|200px]]
|-
|style="text-align:center;font-size:90%" | 
|style="text-align:center;font-size:90%" |Oversaturated
|style="text-align:center;font-size:90%" |Default
|style="text-align:center;font-size:90%" |Undersaturated
|-
|colspan="4" style="text-align:center;font-size:90%" |Choosing ''sigma'' and ''max.'' parameters visually for hessian analysis from a representative region in the image (orange box). With saturated ''max'', the cost function for A* search is equivalent across the signal. Also, note how lower sigma values cause the axon to be dimmer on the center and brighter on the edges, while higher sigma values eliminate detail from the structure.
|-
|}
</center>

Experiment with different values of the ''Adjusted max.'' to find a setting which captures the structures you are interested in while taking care to avoid over or under-saturation. In the former case, the search might consider pixels outside of the tubular structures, giving a less accurate result. In the latter case, the search might take significantly longer, since each pixel will carry greater cost than is reasonable. It is usually safe to choose a value somewhere near the default. Once you have chosen this value, click on the square in the palette with the sigma that best fits your application (its border will turn green) then press "Apply". The parameters will be transferred to the interface and a Gaussian convolution will be run over the image, which may take some time depending on its size. Once it's done, pathfinding will occur on the Hessian (aka ''Tubeness'') image.

Other options are also available in the ''gear'' drop-down menu:
* '''Cache All Hessian Computations''' By default SNT computes the Hessian matrix on a "compute-as-you-go" basis, which saves RAM but increases the pathfinding time. If you have enough RAM, you can use this option to compute once the matrix and for the full image and cache the result, which in certain cases, can lead to almost-instantaneous searches. Note that this computation adopts the current values of sigma and max. reported in the widget, so you should adjust those (using ''Adjust Settings Visually'') before running this command.

* '''Flush Cached Data''' Removes cached data from RAM
* '''Load Precomputed "Tubeness Image"''' This option allows you to load a  ''Tubeness'' generated elsewhere and use it as the scope od SNT Hessian. This is useful if e.g., a new algorithm is not yet available in ImageJ.
* '''Show Cached "Tubeness Image"''' Displays the ''Tubeness'' data currently cached. Useful for debugging purposes. Also mirrored in {{bc | View | Show Cached/Loaded Hessian (Tubeness) Image}}.
[[File:original-hessian-side-by-side.png|center|thumb|600px|Original (left) and Hessian (right)]]

===Tracing on Filtered Image===
SNT's "Hessian-based analysis" option provides a convenient and easy way to preprocess your data. However, if your data require tailored preprocessing, you may also trace on a user-specified filtered image. For example, one might use the [https://link.springer.com/content/pdf/10.1007%252FBFb0056195.pdf Frangi et al. 1998] method to enhance vessel-like structures in the image.
====A Single Image====
To process a single image with the Frangi Vesselness filter, load it ("test.tif", say) into Fiji and select {{bc | Process | Filters | Frangi Vesselness}}.  (There is more information about this plugin [[Frangi|on its page]].)  By way of example, let's say you select two scales, twice the x voxel separation and five times that value. We apply a Gaussian convolution at each scale. Assuming your image has isotropic resolution with pixel width = pixel height = pixel depth = 1, the parameters would be:
[[File:frangi-parameters.png|center|thumb|Frangi parameters]]
Save the result by doing {{bc | File | Save As}} with the same extension as the original image ("test-filtered.tif", for example). Then, with SNT open, go to the main dialog tab and look for the "Tracing on Filtered Image" widget. Click "Browse" to load the filtered image, select "SNT" for the parser and press "Load". Finally, toggle the "Trace on filtered Image" checkbox. Now the pathfinding will occur on the filtered image.
<div align="center">
<ul> 
<li style="display:inline-block;"> [[Image:filtered-image-load.png|none|thumb|300px|Step 1]] </li>
<li style="display:inline-block;"> [[Image:filtered-image-toggle.png|none|thumb|300px|Step 2]] </li>
</ul>
</div>
To display the image in a separate window, from the SNT dialog go to {{bc | View | Show Filtered Image}}
[[File:display-filtered-image.png|center|thumb|500px|Side-by-side original and filtered images]]

====Preprocess Multiple Images====

The easiest way to preprocess multiple images is to record a macro for processing a single image, then wrap it in a loop to iterate over all files in a directory. For example:

<source lang="java">
d = getDirectory("Select a directory");
files = getFileList(d);

extension = ".tif";

for( i = 0; i < files.length; ++i ) {
    filename = files[i];
    if( endsWith(filename,extension) ) {
        l = lengthOf(filename);
        el = lengthOf(extension);
        basename = substring(filename,0,l-el);
        expected_window_name = "vesselness of "+filename;
        output_filename = d + File.separator + basename + ".tubes.tif";
        open(filename);
        run("Frangi Vesselness (imglib, experimental)", "number=1 minimum=0.288387 maximum=0.288387");
        selectWindow(expected_window_name);
        saveAs("Tiff", output_filename);
    }
}
</source>

===Filters for Visibility of Paths===

By default, the entire path is projected onto the current Z-slice. This is useful to see how much has been completed, and gives a sense of the overall structure of the reconstruction. However, SNT provides 3 additional visibility options for paths:
[[File:Path-visibility-filters.png|right|thumb|"Filters for visibility of paths" widget]]
# '''Only selected paths (hide deselected)''' - Only show paths that have been manually selected in the Path Manger or with the {{Key|G}} key ({{Key|Shift}}+{{Key|G}} to select multiple paths).
# '''Only nodes within X nearby Z-slices''' - Only highlight nodes within X number of Z-slices on either side of the current slice. The projected skeletons of all paths remain visible.
# '''Only paths from active channel/frame''' - If tracing on a multichannel image or an image with a time axis, only show paths from the active channel or frame.
Any combination of these options may be toggled simultaneously.

===Default Path Colors===
Path coloring in SNT indicates status of the path. The default color indicators for finished paths are: [[File:Default-path-colors.png|right|thumb|300px|"Default Path Colors" widget]]
[[File:CMYK-color-model.png|right|thumb|300px|CMYK color selection UI]]
* <pre style="color: #00FF00;font-size:20px">Green</pre> - Selected
* <pre style="color: #FF00FF;font-size:20px">Magenta</pre> - Deselected, meaning the path cannot be extended or edited until selected.

The default color for each path type can be changed to any color in the [https://en.wikipedia.org/wiki/CMYK_color_model CMYK color model]. To do so for selected and deselected paths, press the "Selected" or "Deselected" button in the "Default Path Colors" widget. For unconfirmed and temporary paths, see the "Colors" option in the [[SNT:_Overview#UI_Interaction|UI Interaction]] widget.

The "Enforce default colors (ignore color tags)" option, if active, will force all paths to conform to the default colors specified by the "Selected" and "Deselected" color buttons. Any custom color tags will be ignored until the option is toggled OFF.

Selected paths can be assigned custom color tags in the Path Manager. To do so, go to {{bc | Tag | Color}} then choose the desired swatch. Each path can be assigned any color. To change color of all paths, deselect all paths first.
{{Tip| id = color-swatches|tip = Hover the mouse cursor over a color swatch to display a tooltip with its RGB value.}}
{{clear}}
<div align="center">
<ul> 
<li style="display:inline-block;"> [[Image:Path-manager-color-tag.png|none|thumb|260px|Color tagging]] </li>
<li style="display:inline-block;"> [[Image:Color-tag-result-2.png|none|thumb|260px|Arbitrary path coloring]] </li>
<li style="display:inline-block;"> [[Image:Color-tag-result-image.png|none|thumb|340px|Result]] </li>
</ul>
</div>
{{clear}}

==Options Tab==
This tab aggregated widgets for advanced settings.

===Data Source===
[[File:SNT-data-source-widget.png|right|thumb|"Data Source" widget]]
If tracing on a multi-dimensional image (i.e., one with multiple data channels and/or a time axis), a particular channel/frame can be loaded into the views by selecting each and pressing the "Reload" button.

===Views===
[[File:SNT-views-widget.png|right|thumb|"Views" widget]]
* '''Overlay MIP(s) at X% opacity''' - Overlay the [https://en.wikipedia.org/wiki/Maximum_intensity_projection Maximum Intensity Projection] of the image onto the current Z-slice at specified opacity. 
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:OP1-without-MIP.png|none|thumb|300px|Image without MIP overlay]] </li>
<li style="display:inline-block;"> [[Image:OP1-with-MIP.png|none|thumb|300px|Image with MIP overlay at 30%]] </li>
</ul>
</div>
* '''Draw diameters in XY view''' - Display the stored diameter (if any) in the XY view for all existing nodes. Each diameter is drawn as a line segment with length = diameter, which is bisected by the orthogonal tangent vector to the path at that node.
<div align="left">
<ul> 
<li style="display:inline-block;"> [[Image:Draw-diameters-disabled.png|none|thumb|300px|Draw diameters in XY view - disabled]] </li>
<li style="display:inline-block;"> [[Image:Draw-diameters-enabled.png|none|thumb|300px|Draw diameters in XY view - enabled]] </li>
</ul>
</div>
* '''Apply zoom changes to all views''' - If a zoom change is applied to any one of the XY, ZY or XZ views, apply the same change to the two other views if they are open. May resize windows.
* '''Resize Canvas''' - If using a display canvas to view reconstructions, reset its dimensions to the default. (Currently, this command is only available for display canvases, to resize an image go to IJ's command {{ bc | Image | Adjust | Canvas Size...}}
* '''Display ZY/XZ views''' - If currently using the XY only view, display the ZY and XZ views as well.

===Temporary Paths===
[[File:SNT-temporary-paths-dialog.png|right|thumb|"Temporary Paths" widget]]
* '''Confirm temporary segments''' - If active, prompts for either confirmation or denial of whether or not to keep an unconfirmed path segment. If inactive, automatically confirms the path segment created on each left-click after starting a path (first click). Applies to both auto-traced and manually traced path segments. The following two settings are only toggle-able when this setting is active.
** '''Pressing 'Y' twice finishes path''' - Finish a temporary path on two successive {{key|Y}} key presses.
** '''Pressing 'N' twice cancels path''' - Discard a temporary or unconfirmed path, including the start node, on two successive {{key|N}} key presses.

===UI Interaction===
[[File:SNT-UI-interaction-widget.png|right|thumb|"UI Interaction" widget]]
* '''Colors''' - The default color for the following items (can be changed to any color in the CMYK color model):
** <pre style="color: #FF0000;font-size:20px">Red</pre> - Canvas annotations: these indicate the various possible states of the UI, and are shown in the top-left corner of the views ("Tracing Paused", "Choosing Sigma", etc...)
** <pre style="color: #008200;font-size:20px">Dark Green</pre> - Fills: the pixels that have been reached by the Fill search.
** <pre style="color: #00FFFF;font-size:20px">Cyan</pre> - Unconfirmed paths 
** <pre style="color: #FF0000;font-size:20px">Red</pre> - Temporary paths
* '''Path nodes rendering scale''' - (default is 2 pixels at default zoom level) Adjusts the radius of the circles representing path nodes. A path node is rendered as a circle centered at the XYZ coordinate of the point annotation.
* '''Activate canvas on mouse hovering''' - If active, moving the mouse cursor over the any of the views automatically brings the view window into focus, allowing it to receive input.

===Misc===
[[File:SNT-misc-options.png|right|thumb|"Misc" widget]]
* '''Remember window locations''' - If active, preserves the position of dialogs across restarts.
* '''Use compression when saving traces''' - If active, uses [https://en.wikipedia.org/wiki/Gzip Gzip] compression (lossless) to reduce the storage footprint of the ".traces" file.
* '''Skip confirmation dialogs''' - If active, forgoes the "Are you sure?" prompt preceding major actions.
* '''Debug mode''' - If active, logs detailed information about actions in the console.
The "Reset Preferences..." button, when pressed, will reset all options to their defaults. A restart of SNT may be required for changes to take effect.

== 3D Tab ==

=Path Manager=
=Fill Manager=
Provides controls for all filling operations. It is described in more detail in the [[SNT:_Step-By-Step_Instructions#Filling|Filling Walkthrough]]
